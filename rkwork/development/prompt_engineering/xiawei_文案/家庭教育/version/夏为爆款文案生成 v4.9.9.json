{
  "nodes": [
    {
      "nodeId": "userGuide",
      "name": "common:core.module.template.system_config",
      "intro": "common:core.module.template.system_config_info",
      "avatar": "core/workflow/template/systemConfig",
      "flowNodeType": "userGuide",
      "position": {
        "x": -1983.1831854547845,
        "y": -639.1192448830739
      },
      "version": "481",
      "inputs": [
        {
          "key": "welcomeText",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "label": "core.app.Welcome Text",
          "value": ""
        },
        {
          "key": "variables",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "core.app.Chat Variable",
          "value": []
        },
        {
          "key": "questionGuide",
          "valueType": "boolean",
          "renderTypeList": [
            "hidden"
          ],
          "label": "core.app.Question Guide",
          "value": false
        },
        {
          "key": "tts",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": {
            "type": "web"
          }
        },
        {
          "key": "whisper",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": {
            "open": false,
            "autoSend": false,
            "autoTTSResponse": false
          }
        },
        {
          "key": "scheduleTrigger",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": null
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "448745",
      "name": "common:core.module.template.work_start",
      "intro": "",
      "avatar": "core/workflow/template/workflowStart",
      "flowNodeType": "workflowStart",
      "position": {
        "x": -883.9619819895564,
        "y": -615.7441146218721
      },
      "version": "481",
      "inputs": [
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "common:core.module.input.label.user question",
          "required": true,
          "toolDescription": "用户问题",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "userChatInput",
          "key": "userChatInput",
          "label": "common:core.module.input.label.user question",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "ihWXiYcPSk54",
      "name": "判断器",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 1538.2678397683849,
        "y": -664.3017939189267
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "vm6dwxVI41aH",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "1"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "vm6dwxVI41aH",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "2"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "ljYjuFkr7N52",
      "name": "讲故事类型文案结构2",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 2455.032904158027,
        "y": -440.2931391300141
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1,
          "value": [
            "vm6dwxVI41aH",
            "selectResult"
          ]
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "glc3cxRfDFFr",
      "name": "讲故事类型文案结构1",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 7921.313685371532,
        "y": -1795.2322711220324
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1,
          "value": [
            "fFFrM5hlpUK2",
            "answerText"
          ]
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "sn3zRYmfxy4U",
      "name": "判断器#2",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": -232.35925314396837,
        "y": -676.3793594363415
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "文案类型"
                  ],
                  "condition": "equalTo",
                  "value": "故事型"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "文案类型"
                  ],
                  "condition": "equalTo",
                  "value": "盘点型"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "文案类型"
                  ],
                  "condition": "equalTo",
                  "value": "嘴替型"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "vm6dwxVI41aH",
      "name": "用户选择",
      "intro": "该模块可配置多个选项，以供对话时选择。不同选项可导向不同工作流支线",
      "avatar": "core/workflow/template/userSelect",
      "flowNodeType": "userSelect",
      "showStatus": true,
      "position": {
        "x": 755.9983365911619,
        "y": -751.3017939189267
      },
      "version": "489",
      "inputs": [
        {
          "key": "description",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "label": "说明文字",
          "description": "app:workflow.select_description_tip",
          "placeholder": "app:workflow.select_description_placeholder",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "感谢您选择了【故事型】文案，接下来 请选择您 喜欢的 文案结构类型，我会为您创组3篇符合该文案结构的文案内容！\n1 讲故事类型文案结构一：欺凌场景(性格) | 孩子  +  做法1 加剧 + 做法2 无效 | 老师或家长 + 转机 寓言递进  + 寓言总结\n2 讲故事类型文案结构二：\n3 ..."
        },
        {
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "label": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "key": "userSelectOptions",
          "value": [
            {
              "value": "1",
              "key": "option1"
            },
            {
              "value": "2",
              "key": "option2"
            }
          ]
        }
      ],
      "outputs": [
        {
          "id": "selectResult",
          "key": "selectResult",
          "required": true,
          "label": "app:workflow.select_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "lN7HHD8FPVLg",
      "name": "文本拼接",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2455.032904158027,
        "y": -1072.1986862196986
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "['ID_1_Number_1', 'ID_1_Number_2', 'ID_1_Number_3', 'ID_1_Number_4', 'ID_1_Number_5', 'ID_1_Number_6', 'ID_1_Number_7', 'ID_1_Number_8', 'ID_1_Number_9', 'ID_1_Number_10', 'ID_1_Number_11', 'ID_1_Number_12', 'ID_1_Number_13', 'ID_1_Number_14', 'ID_1_Number_15', 'ID_1_Number_16', 'ID_1_Number_17', 'ID_1_Number_18', 'ID_1_Number_19', 'ID_1_Number_20', 'ID_1_Number_21', 'ID_1_Number_22', 'ID_1_Number_23', 'ID_1_Number_24']"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "rv4jho1RUpTX",
      "name": "代码运行",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3285.0009764438555,
        "y": -2086.401496663329
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(', ');\n  \n  // 获取数组的长度\n  var arrayLength = dataArray.length;\n  \n  // 生成一个随机索引\n  var randomIndex = Math.floor(Math.random() * arrayLength);\n  \n  // 返回随机索引对应的数组元素\n  return { result: dataArray[randomIndex] };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "lN7HHD8FPVLg",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "sBVGQ7U5TtFh",
      "name": "文本拼接#2",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 4963.7504388181615,
        "y": -1914.7322711220324
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$m15VBD75mePj.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "m15VBD75mePj",
      "name": "知识库搜索",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4413.537649765694,
        "y": -1945.401496663329
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "dTOAckgNQBni",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "dTOAckgNQBni",
      "name": "文本拼接#3",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3731.878439086963,
        "y": -1959.901496663329
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$dTOAckgNQBni.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "rv4jho1RUpTX",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "hNK6Rp2P7kyW",
      "name": "代码运行#2",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 5586.4235206523035,
        "y": -2097.232271122032
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 正则表达式匹配JSON对象中的q属性值\n  const jsonPartRegex = /\"q\":\"([^\"]*)\"/;\n  const match = data1.match(jsonPartRegex);\n\n  if (match && match[1]) {\n    // 提取q属性的值，即JSON字符串部分\n    const jsonString = match[1];\n\n    // 使用正则表达式匹配中文字符\n    const chineseText = /[\\u4e00-\\u9fa5]+/g.test(jsonString) ? jsonString.match(/[\\u4e00-\\u9fa5]+/g).join('') : '';\n\n    // 返回包含中文文本的对象\n    return { result: chineseText };\n  } else {\n    // 如果没有找到匹配的JSON字符串部分，返回空结果\n    return { result: '' };\n  }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "sBVGQ7U5TtFh",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "rsSy6VpkKDfE",
      "name": "文本拼接#4",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 6185.438415375321,
        "y": -1914.7322711220324
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "额外信息：{{$hNK6Rp2P7kyW.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "fFFrM5hlpUK2",
      "name": "AI 对话",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 7106.613437050803,
        "y": -2242.232271122032
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "文案仿写，要求，结构一样，内容相关性高，语言特征一致，用词要能吸引人，贴合实际，细节部分到位，根据额外信息适当修改内容，参考文案：\n原文案：\n有一个小孩胖胖的 到了学校呢 同学们笑他 他心情很愤怒 只要有人笑他呢 他就要跟人家干架 所以他经常伤痕累累的回到家 他妈妈就好心疼 去找老师 老师呢 就会跟这帮小朋友说 你们不要说他了 你们知道不要等于什么 等于要对不对 结果更多人笑他了 一笑他就生气 一生气就吵架 一吵架就打架 老师就跟他讲 你就不能不理他们吗 他们笑归他们了 所以你不管他不行吗 结果就开始说 我不行的 我受不了 他们就不能笑我 好了这个时候呢 学校请了一个心理辅导师过来 这个心理辅导师 对这件事情非常有兴趣 他把这个小男孩叫到办公室 等一下你坐在这里 听他们嘲笑你 如果五分钟的时间 你可以不生气 不管他们说什么 你都可以不生气 你可以赢五百块哦 因为五分钟时间之内 你生气了 他们就赢五百块哦 然后他问这个小男孩 如果你赢了五百块 你会拿来做什么 这个小男孩说 哇哦 如果我赢了五百块 我就想买一辆自行车 我好想买一辆自行车 可是他们说我太胖了 坐上去轮胎就会爆 我好想买一辆自行车 这个心理学家说 那可能你待会可以买一辆自行车 如果他们骂你 你生气了 这五百块就给他们 他们就好赚了 既能骂你又能赚钱 然后这秦同学在这边已经怎么样 跃跃欲试了 对不对 我要把你骂到生气 好了 计时五分钟开始 这些人兴起所有恶毒言来攻击他 前面小男孩生不生气 他就晃着两个小脚 骂呀骂呀骂呀 骂 我不会生气 我有五百块 五分钟过去了 这些人骂得好累 生不生气 生气 五百块拿到了 然后这个心理学家跟他说 我们再来玩一个升级一点的游戏 等下他们要骂你二十分钟 二十分钟 如果你不生气 你可以拿一千块 他说 我想知道 如果你得到这一千块 你会干什么 小男孩想了好久 他眼睛突然红了 他说 我想给我奶奶买个拐杖 我奶奶的腿不好 他总是扶着墙走路 心理学家说 你真的是一个好善良的孩子 我相信奶奶收到拐杖 一定是非常开心的 然后你们准备好了没 喝点水准备好了没 这帮已经有点气累的了 二十分钟一千块 干不干 干 继续骂 没到十来分钟 已经累得不行了 这个小男孩在这边骂呀骂呀 十来分钟休战 一千块拿走 紧跟着心理学家又跟他说 我们打个更好玩的游戏 两千块敢不敢赌 这两千块维持时间是两天 这两天的时间 如果他们用刚才的 肥胖的恶毒的语言攻击你 那么你可以决定自己不生气 胆千块 后来这帮同学说不玩了 事情就这样 心理学家跟男孩子说 你是有权利生气的 因为有些事情 对你真的是造成了伤害 可是我想告诉你 你也是有权利不生气的 你可以选择生气对他们打成一堆 你也可以选择淡然的 有一道屏障挡住这些伤害 到底生气还是不生气 是你选择的 不是他们来决定\n"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1,
          "value": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "o4rz7Kdpjrim",
      "name": "判断器#3",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 1538.2678397683849,
        "y": 7.800163434458909
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "1"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "2"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "3"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "4"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "5"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "6"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "7"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "8"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "9"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "10"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "11"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "12"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "gB9FU3Pucx05",
      "name": "文本拼接#5",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2455.032904158027,
        "y": -85.37935943634147
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "['ID_2_Number_1', 'ID_2_Number_2', 'ID_2_Number_3', 'ID_2_Number_4', 'ID_2_Number_5', 'ID_2_Number_6', 'ID_2_Number_7', 'ID_2_Number_8', 'ID_2_Number_9', 'ID_2_Number_10', 'ID_2_Number_11', 'ID_2_Number_12', 'ID_2_Number_13', 'ID_2_Number_14', 'ID_2_Number_15', 'ID_2_Number_16', 'ID_2_Number_17', 'ID_2_Number_18', 'ID_2_Number_19', 'ID_2_Number_20', 'ID_2_Number_21', 'ID_2_Number_22', 'ID_2_Number_23', 'ID_2_Number_24', 'ID_2_Number_25', 'ID_2_Number_26', 'ID_2_Number_27', 'ID_2_Number_28', 'ID_2_Number_29', 'ID_2_Number_30', 'ID_2_Number_31', 'ID_2_Number_32', 'ID_2_Number_33', 'ID_2_Number_34', 'ID_2_Number_35', 'ID_2_Number_36', 'ID_2_Number_37', 'ID_2_Number_38', 'ID_2_Number_39', 'ID_2_Number_40', 'ID_2_Number_41', 'ID_2_Number_42', 'ID_2_Number_43', 'ID_2_Number_44', 'ID_2_Number_45', 'ID_2_Number_46', 'ID_2_Number_47', 'ID_2_Number_48', 'ID_2_Number_49', 'ID_2_Number_50']"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "tQuFHW8Oot0x",
      "name": "讲故事类型文案结构2#3",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 2350.9659371432767,
        "y": 10271.23856666627
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1,
          "value": [
            "wx9DptzqiP54",
            "selectResult"
          ]
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "vK3tb6rJyofl",
      "name": "代码运行#3",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3331.878439086963,
        "y": -172.87935943634147
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(', ');\n  \n  // 获取数组的长度\n  var arrayLength = dataArray.length;\n  \n  // 生成一个随机索引\n  var randomIndex = Math.floor(Math.random() * arrayLength);\n  \n  // 返回随机索引对应的数组元素\n  return { result: dataArray[randomIndex] };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "gB9FU3Pucx05",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "n2pxPYqMF2uy",
      "name": "文本拼接#6",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3991.477700154695,
        "y": -46.379359436341446
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$n2pxPYqMF2uy.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "vK3tb6rJyofl",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "bCTlQqS29Cm6",
      "name": "知识库搜索#2",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4817.222213610274,
        "y": -31.879359436341474
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "n2pxPYqMF2uy",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "t2gHJbxWbgZx",
      "name": "文本拼接#7",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5845.589242928917,
        "y": -15.379359436341474
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$bCTlQqS29Cm6.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "dTfwyINiw5lh",
      "name": "代码运行#4",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6681.966140649034,
        "y": -172.87935943634147
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 正则表达式匹配JSON对象中的q属性值\n  const jsonPartRegex = /\"q\":\"([^\"]*)\"/;\n  const match = data1.match(jsonPartRegex);\n\n  if (match && match[1]) {\n    // 提取q属性的值，即JSON字符串部分\n    const jsonString = match[1];\n\n    // 使用正则表达式匹配中文字符\n    const chineseText = /[\\u4e00-\\u9fa5]+/g.test(jsonString) ? jsonString.match(/[\\u4e00-\\u9fa5]+/g).join('') : '';\n\n    // 返回包含中文文本的对象\n    return { result: chineseText };\n  } else {\n    // 如果没有找到匹配的JSON字符串部分，返回空结果\n    return { result: '' };\n  }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "t2gHJbxWbgZx",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "gxSAX6fBKHZO",
      "name": "文本拼接#8",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7348.213535354489,
        "y": -15.379359436341474
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "额外信息：{{$dTfwyINiw5lh.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "mBZY5O40s6VK",
      "name": "AI 对话#2",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8185.498162550795,
        "y": -222.87935943634147
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "文案仿写，要求，结构一样，内容相关性高，语言特征一致，用词要能吸引人，贴合实际，细节部分到位，根据额外信息适当修改内容，参考文案：\n原文案：\n家长经常在孩子面前秀恩爱，会给孩子带来什么呢？\n一会让孩子的情商更高，\n二会让孩子更加自信，善良，乐观，大脑发育快，人际交往更加顺利，\n三，孩子未来会对婚姻充满了向往，懂得如何分担家庭的责任。\n最好的秀恩爱的方式就是在日常生活的柴米油盐，鸡毛蒜皮里，\n每次家长秀恩爱的场景都会是孩子心中最美丽的画面。"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "gxSAX6fBKHZO",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "xX1YSATLoVqi",
      "name": "讲故事类型文案结构1#4",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 9177.311593739765,
        "y": 133.12064056365853
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1,
          "value": [
            "mBZY5O40s6VK",
            "answerText"
          ]
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "wx9DptzqiP54",
      "name": "用户选择#2",
      "intro": "该模块可配置多个选项，以供对话时选择。不同选项可导向不同工作流支线",
      "avatar": "core/workflow/template/userSelect",
      "flowNodeType": "userSelect",
      "showStatus": true,
      "position": {
        "x": 755.9983365911619,
        "y": 60.88075511692614
      },
      "version": "489",
      "inputs": [
        {
          "key": "description",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "label": "说明文字",
          "description": "app:workflow.select_description_tip",
          "placeholder": "app:workflow.select_description_placeholder",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "感谢您选择了【盘点型】文案，接下来 请选择您 喜欢的 文案结构类型，我会为您创组3篇符合该文案结构的文案内容！\n1 盘点类型文案结构一：父母行为+会给孩子带来什么\n2 盘点类型文案结构二：3句话让孩子+家长想纠正的孩子坏习惯+妈妈们快收藏起来\n3 盘点类型文案结构三：这N种+对象（学生/孩子/？）+ 结果\n4 盘点类型文案结构四：痛点 + 顺口溜 \n5 盘点类型文案结构五：一定要教会孩子不能 + ...\n6 盘点类型文案结构六：孩子情绪场景 + 正确处理\n7 盘点类型文案结构七：改变孩子未来+教育理念\n8 盘点类型文案结构八：由爸爸来告诉孩子+道理\n9 盘点类型文案结构九：道理+作用\n10 盘点类型文案结构十：困惑点+正确做法\n11 盘点类型文案结构十一：问题+引导+问题的本质+解决方法+结尾与号召\n12 盘点类型文案结构十二：直接观点+反驳观点+否定反驳观点+解释行为+教育意义+总结观点"
        },
        {
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "label": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "key": "userSelectOptions",
          "value": [
            {
              "value": "1",
              "key": "option1"
            },
            {
              "value": "2",
              "key": "option2"
            },
            {
              "value": "3",
              "key": "bxnoNhjVqoEa"
            },
            {
              "value": "4",
              "key": "iIVCfojRbJGb"
            },
            {
              "value": "5",
              "key": "yp9aCit7Lo08"
            },
            {
              "value": "6",
              "key": "pUD25F9NCPhk"
            },
            {
              "value": "7",
              "key": "kmZjS9o0fLlG"
            },
            {
              "value": "8",
              "key": "t3eqvlsdLwIs"
            }
          ]
        }
      ],
      "outputs": [
        {
          "id": "selectResult",
          "key": "selectResult",
          "required": true,
          "label": "app:workflow.select_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "l3A2rurWm9EK",
      "name": "AI 对话#3",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8216.859400424506,
        "y": 142.02288900829922
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "参照如下文案结构和分析，根据用户输入的主题，生成文案内容，注意文案的逻辑通畅，只输出最终文案\n3句话让孩子不再顶嘴，妈妈们快收藏起来。\n分析：3句话让孩子+家长想纠正的孩子坏习惯+妈妈们快收藏起来\n第一句话，妈妈知道你现在很生气，但是我们不发脾气，你先冷静一下，等一会儿咱们再聊。\n分析：妈妈懂你（诠释孩子行为原因）\n第二句，妈妈希望你生气的时候说我很生气，我很不开心，而不是说你是个坏妈妈，我讨厌你。\n分析：妈妈希望（告诉孩子正确做法）\n第三句，告诉妈妈你现在的想法，我们一起找最好的办法来解决问题好不好？\n分析：妈妈提议（如何一起解决问题）"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "mNUYWKHoMnx5",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "ttt3vJMczhlm",
      "name": "文本拼接#9",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9254.985394137686,
        "y": 367.23196313948824
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$l3A2rurWm9EK.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "iOKincPAf3jO",
      "name": "文本拼接#10",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2429.2344262683073,
        "y": 137.55116287621865
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "['ID_3_Number_1', 'ID_3_Number_2', 'ID_3_Number_3', 'ID_3_Number_4', 'ID_3_Number_5', 'ID_3_Number_6', 'ID_3_Number_7', 'ID_3_Number_8', 'ID_3_Number_9', 'ID_3_Number_10', 'ID_3_Number_11', 'ID_3_Number_12', 'ID_3_Number_13', 'ID_3_Number_14', 'ID_3_Number_15', 'ID_3_Number_16', 'ID_3_Number_17', 'ID_3_Number_18', 'ID_3_Number_19', 'ID_3_Number_20', 'ID_3_Number_21', 'ID_3_Number_22', 'ID_3_Number_23', 'ID_3_Number_24', 'ID_3_Number_25', 'ID_3_Number_26', 'ID_3_Number_27', 'ID_3_Number_28', 'ID_3_Number_29', 'ID_3_Number_30', 'ID_3_Number_31', 'ID_3_Number_32', 'ID_3_Number_33', 'ID_3_Number_34', 'ID_3_Number_35', 'ID_3_Number_36', 'ID_3_Number_37', 'ID_3_Number_38', 'ID_3_Number_39', 'ID_3_Number_40', 'ID_3_Number_41', 'ID_3_Number_42', 'ID_3_Number_43', 'ID_3_Number_44', 'ID_3_Number_45', 'ID_3_Number_46', 'ID_3_Number_47', 'ID_3_Number_48', 'ID_3_Number_49', 'ID_3_Number_50', 'ID_3_Number_51', 'ID_3_Number_52', 'ID_3_Number_53', 'ID_3_Number_54', 'ID_3_Number_55', 'ID_3_Number_56', 'ID_3_Number_57', 'ID_3_Number_58', 'ID_3_Number_59', 'ID_3_Number_60', 'ID_3_Number_61', 'ID_3_Number_62', 'ID_3_Number_63', 'ID_3_Number_64', 'ID_3_Number_65', 'ID_3_Number_66', 'ID_3_Number_67', 'ID_3_Number_68', 'ID_3_Number_69', 'ID_3_Number_70', 'ID_3_Number_71', 'ID_3_Number_72', 'ID_3_Number_73', 'ID_3_Number_74', 'ID_3_Number_75', 'ID_3_Number_76', 'ID_3_Number_77', 'ID_3_Number_78', 'ID_3_Number_79', 'ID_3_Number_80', 'ID_3_Number_81', 'ID_3_Number_82', 'ID_3_Number_83', 'ID_3_Number_84', 'ID_3_Number_85', 'ID_3_Number_86', 'ID_3_Number_87', 'ID_3_Number_88', 'ID_3_Number_89', 'ID_3_Number_90', 'ID_3_Number_91', 'ID_3_Number_92', 'ID_3_Number_93', 'ID_3_Number_94', 'ID_3_Number_95', 'ID_3_Number_96', 'ID_3_Number_97', 'ID_3_Number_98', 'ID_3_Number_99', 'ID_3_Number_100']"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "pxNoIbxQyB6y",
      "name": "代码运行#5",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3303.6638508281058,
        "y": 194.7533643332547
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(', ');\n  \n  // 获取数组的长度\n  var arrayLength = dataArray.length;\n  \n  // 生成一个随机索引\n  var randomIndex = Math.floor(Math.random() * arrayLength);\n  \n  // 返回随机索引对应的数组元素\n  return { result: dataArray[randomIndex] };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "iOKincPAf3jO",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "tKh0LtDgcx4U",
      "name": "文本拼接#11",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3971.9748246811578,
        "y": 321.2533643332547
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$tKh0LtDgcx4U.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "pxNoIbxQyB6y",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "z8HC5eiqAl3e",
      "name": "知识库搜索#3",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4817.222213610274,
        "y": 349.9164641342936
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "tKh0LtDgcx4U",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "mwSzY90WNL9y",
      "name": "文本拼接#12",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5845.589242928917,
        "y": 367.23196313948824
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$z8HC5eiqAl3e.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "gV8OuPvfX6r1",
      "name": "代码运行#6",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6681.966140649034,
        "y": 209.2533643332547
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 正则表达式匹配JSON对象中的q属性值\n  const jsonPartRegex = /\"q\":\"([^\"]*)\"/;\n  const match = data1.match(jsonPartRegex);\n\n  if (match && match[1]) {\n    // 提取q属性的值，即JSON字符串部分\n    const jsonString = match[1];\n\n    // 使用正则表达式匹配中文字符\n    const chineseText = /[\\u4e00-\\u9fa5]+/g.test(jsonString) ? jsonString.match(/[\\u4e00-\\u9fa5]+/g).join('') : '';\n\n    // 返回包含中文文本的对象\n    return { result: chineseText };\n  } else {\n    // 如果没有找到匹配的JSON字符串部分，返回空结果\n    return { result: '' };\n  }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "mwSzY90WNL9y",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "mNUYWKHoMnx5",
      "name": "文本拼接#13",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7358.195217132253,
        "y": 366.7533643332547
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "额外信息：{{$gV8OuPvfX6r1.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "tDgqyXNxd4rV",
      "name": "AI 对话#4",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8205.18554213278,
        "y": 1060.4114286309132
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "根据文案标题, 参照示例结构进行文案仿写 ， 示例结构如下：\n这8种学生啊，永远都拿不了高分\n第一写字潦草的学生，\n第二，喜欢拖延的学生，\n第三，不爱总结的学生，\n第4，不爱规则的学生，\n第5，不爱阅读的学生，\n第6，眼高手低的学生，\n第7，基础不扎实的学生，\n第8，把心思全都沉迷在电子游戏的学生。"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "bgm2ESlJCRJm",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "kfZhkNT7U0Cc",
      "name": "文本拼接#14",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9130.808660372422,
        "y": 1313.4509845224054
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$tDgqyXNxd4rV.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "lP0u2pvYIjQQ",
      "name": "用户选择#3",
      "intro": "该模块可配置多个选项，以供对话时选择。不同选项可导向不同工作流支线",
      "avatar": "core/workflow/template/userSelect",
      "flowNodeType": "userSelect",
      "showStatus": true,
      "position": {
        "x": 755.9983365911619,
        "y": 1921.6380549448822
      },
      "version": "489",
      "inputs": [
        {
          "key": "description",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "label": "说明文字",
          "description": "app:workflow.select_description_tip",
          "placeholder": "app:workflow.select_description_placeholder",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "感谢您选择了【嘴替型】文案，接下来 请选择您 喜欢的 文案结构类型，我会为您创组3篇符合该文案结构的文案内容！\n1 嘴替类型文案结构一：父/母 + 情感 + 时间节点\n2 嘴替类型文案结构二：3句话让孩子+家长想纠正的孩子坏习惯+妈妈们快收藏起来\n3 ..."
        },
        {
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "label": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "key": "userSelectOptions",
          "value": [
            {
              "value": "1",
              "key": "option1"
            },
            {
              "value": "2",
              "key": "option2"
            },
            {
              "value": "3",
              "key": "piG55qh5Fmh4"
            }
          ]
        }
      ],
      "outputs": [
        {
          "id": "selectResult",
          "key": "selectResult",
          "required": true,
          "label": "app:workflow.select_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "bW2MWJHCuOFX",
      "name": "文本拼接#15",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2455.032904158027,
        "y": 1049.7999377796223
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "['ID_4_Number_1', 'ID_4_Number_2', 'ID_4_Number_3', 'ID_4_Number_4', 'ID_4_Number_5', 'ID_4_Number_6', 'ID_4_Number_7', 'ID_4_Number_8', 'ID_4_Number_9', 'ID_4_Number_10', 'ID_4_Number_11', 'ID_4_Number_12', 'ID_4_Number_13', 'ID_4_Number_14', 'ID_4_Number_15', 'ID_4_Number_16', 'ID_4_Number_17', 'ID_4_Number_18', 'ID_4_Number_19', 'ID_4_Number_20', 'ID_4_Number_21', 'ID_4_Number_22', 'ID_4_Number_23', 'ID_4_Number_24', 'ID_4_Number_25', 'ID_4_Number_26', 'ID_4_Number_27', 'ID_4_Number_28', 'ID_4_Number_29', 'ID_4_Number_30', 'ID_4_Number_31', 'ID_4_Number_32', 'ID_4_Number_33', 'ID_4_Number_34', 'ID_4_Number_35', 'ID_4_Number_36', 'ID_4_Number_37', 'ID_4_Number_38', 'ID_4_Number_39', 'ID_4_Number_40', 'ID_4_Number_41', 'ID_4_Number_42', 'ID_4_Number_43', 'ID_4_Number_44', 'ID_4_Number_45', 'ID_4_Number_46', 'ID_4_Number_47', 'ID_4_Number_48', 'ID_4_Number_49', 'ID_4_Number_50', 'ID_4_Number_51', 'ID_4_Number_52', 'ID_4_Number_53', 'ID_4_Number_54', 'ID_4_Number_55', 'ID_4_Number_56', 'ID_4_Number_57', 'ID_4_Number_58', 'ID_4_Number_59', 'ID_4_Number_60', 'ID_4_Number_61', 'ID_4_Number_62', 'ID_4_Number_63', 'ID_4_Number_64', 'ID_4_Number_65', 'ID_4_Number_66', 'ID_4_Number_67', 'ID_4_Number_68', 'ID_4_Number_69', 'ID_4_Number_70', 'ID_4_Number_71', 'ID_4_Number_72', 'ID_4_Number_73', 'ID_4_Number_74', 'ID_4_Number_75', 'ID_4_Number_76', 'ID_4_Number_77', 'ID_4_Number_78', 'ID_4_Number_79', 'ID_4_Number_80', 'ID_4_Number_81', 'ID_4_Number_82', 'ID_4_Number_83', 'ID_4_Number_84', 'ID_4_Number_85', 'ID_4_Number_86', 'ID_4_Number_87', 'ID_4_Number_88', 'ID_4_Number_89', 'ID_4_Number_90', 'ID_4_Number_91', 'ID_4_Number_92', 'ID_4_Number_93', 'ID_4_Number_94', 'ID_4_Number_95', 'ID_4_Number_96', 'ID_4_Number_97', 'ID_4_Number_98', 'ID_4_Number_99', 'ID_4_Number_100', 'ID_4_Number_101', 'ID_4_Number_102', 'ID_4_Number_103', 'ID_4_Number_104', 'ID_4_Number_105', 'ID_4_Number_106', 'ID_4_Number_107', 'ID_4_Number_108', 'ID_4_Number_109', 'ID_4_Number_110', 'ID_4_Number_111', 'ID_4_Number_112', 'ID_4_Number_113', 'ID_4_Number_114', 'ID_4_Number_115', 'ID_4_Number_116', 'ID_4_Number_117', 'ID_4_Number_118', 'ID_4_Number_119', 'ID_4_Number_120', 'ID_4_Number_121', 'ID_4_Number_122', 'ID_4_Number_123', 'ID_4_Number_124', 'ID_4_Number_125', 'ID_4_Number_126', 'ID_4_Number_127', 'ID_4_Number_128', 'ID_4_Number_129', 'ID_4_Number_130', 'ID_4_Number_131', 'ID_4_Number_132', 'ID_4_Number_133', 'ID_4_Number_134', 'ID_4_Number_135', 'ID_4_Number_136', 'ID_4_Number_137', 'ID_4_Number_138', 'ID_4_Number_139', 'ID_4_Number_140', 'ID_4_Number_141', 'ID_4_Number_142', 'ID_4_Number_143', 'ID_4_Number_144', 'ID_4_Number_145', 'ID_4_Number_146', 'ID_4_Number_147', 'ID_4_Number_148', 'ID_4_Number_149', 'ID_4_Number_150', 'ID_4_Number_151', 'ID_4_Number_152', 'ID_4_Number_153', 'ID_4_Number_154', 'ID_4_Number_155', 'ID_4_Number_156', 'ID_4_Number_157', 'ID_4_Number_158', 'ID_4_Number_159', 'ID_4_Number_160', 'ID_4_Number_161', 'ID_4_Number_162', 'ID_4_Number_163', 'ID_4_Number_164', 'ID_4_Number_165', 'ID_4_Number_166', 'ID_4_Number_167', 'ID_4_Number_168', 'ID_4_Number_169', 'ID_4_Number_170', 'ID_4_Number_171', 'ID_4_Number_172', 'ID_4_Number_173', 'ID_4_Number_174', 'ID_4_Number_175', 'ID_4_Number_176', 'ID_4_Number_177', 'ID_4_Number_178', 'ID_4_Number_179', 'ID_4_Number_180', 'ID_4_Number_181', 'ID_4_Number_182', 'ID_4_Number_183', 'ID_4_Number_184', 'ID_4_Number_185', 'ID_4_Number_186', 'ID_4_Number_187', 'ID_4_Number_188', 'ID_4_Number_189', 'ID_4_Number_190', 'ID_4_Number_191', 'ID_4_Number_192', 'ID_4_Number_193', 'ID_4_Number_194', 'ID_4_Number_195', 'ID_4_Number_196', 'ID_4_Number_197', 'ID_4_Number_198', 'ID_4_Number_199', 'ID_4_Number_200', 'ID_4_Number_201', 'ID_4_Number_202', 'ID_4_Number_203', 'ID_4_Number_204', 'ID_4_Number_205', 'ID_4_Number_206', 'ID_4_Number_207', 'ID_4_Number_208', 'ID_4_Number_209', 'ID_4_Number_210', 'ID_4_Number_211', 'ID_4_Number_212', 'ID_4_Number_213', 'ID_4_Number_214', 'ID_4_Number_215', 'ID_4_Number_216', 'ID_4_Number_217', 'ID_4_Number_218', 'ID_4_Number_219', 'ID_4_Number_220', 'ID_4_Number_221', 'ID_4_Number_222', 'ID_4_Number_223', 'ID_4_Number_224', 'ID_4_Number_225', 'ID_4_Number_226', 'ID_4_Number_227', 'ID_4_Number_228', 'ID_4_Number_229', 'ID_4_Number_230', 'ID_4_Number_231', 'ID_4_Number_232', 'ID_4_Number_233', 'ID_4_Number_234', 'ID_4_Number_235', 'ID_4_Number_236', 'ID_4_Number_237', 'ID_4_Number_238', 'ID_4_Number_239', 'ID_4_Number_240', 'ID_4_Number_241', 'ID_4_Number_242', 'ID_4_Number_243', 'ID_4_Number_244', 'ID_4_Number_245', 'ID_4_Number_246', 'ID_4_Number_247', 'ID_4_Number_248', 'ID_4_Number_249', 'ID_4_Number_250', 'ID_4_Number_251', 'ID_4_Number_252', 'ID_4_Number_253', 'ID_4_Number_254', 'ID_4_Number_255', 'ID_4_Number_256', 'ID_4_Number_257', 'ID_4_Number_258', 'ID_4_Number_259', 'ID_4_Number_260', 'ID_4_Number_261', 'ID_4_Number_262', 'ID_4_Number_263', 'ID_4_Number_264', 'ID_4_Number_265', 'ID_4_Number_266', 'ID_4_Number_267', 'ID_4_Number_268', 'ID_4_Number_269', 'ID_4_Number_270', 'ID_4_Number_271', 'ID_4_Number_272', 'ID_4_Number_273', 'ID_4_Number_274', 'ID_4_Number_275', 'ID_4_Number_276', 'ID_4_Number_277', 'ID_4_Number_278', 'ID_4_Number_279', 'ID_4_Number_280', 'ID_4_Number_281', 'ID_4_Number_282', 'ID_4_Number_283', 'ID_4_Number_284', 'ID_4_Number_285', 'ID_4_Number_286', 'ID_4_Number_287', 'ID_4_Number_288', 'ID_4_Number_289', 'ID_4_Number_290', 'ID_4_Number_291', 'ID_4_Number_292', 'ID_4_Number_293', 'ID_4_Number_294', 'ID_4_Number_295', 'ID_4_Number_296', 'ID_4_Number_297', 'ID_4_Number_298', 'ID_4_Number_299', 'ID_4_Number_300', 'ID_4_Number_301', 'ID_4_Number_302', 'ID_4_Number_303', 'ID_4_Number_304', 'ID_4_Number_305', 'ID_4_Number_306', 'ID_4_Number_307', 'ID_4_Number_308', 'ID_4_Number_309', 'ID_4_Number_310', 'ID_4_Number_311', 'ID_4_Number_312', 'ID_4_Number_313', 'ID_4_Number_314', 'ID_4_Number_315', 'ID_4_Number_316', 'ID_4_Number_317', 'ID_4_Number_318', 'ID_4_Number_319', 'ID_4_Number_320', 'ID_4_Number_321', 'ID_4_Number_322', 'ID_4_Number_323', 'ID_4_Number_324', 'ID_4_Number_325', 'ID_4_Number_326', 'ID_4_Number_327', 'ID_4_Number_328', 'ID_4_Number_329', 'ID_4_Number_330', 'ID_4_Number_331', 'ID_4_Number_332', 'ID_4_Number_333', 'ID_4_Number_334', 'ID_4_Number_335', 'ID_4_Number_336', 'ID_4_Number_337', 'ID_4_Number_338', 'ID_4_Number_339', 'ID_4_Number_340', 'ID_4_Number_341', 'ID_4_Number_342', 'ID_4_Number_343', 'ID_4_Number_344', 'ID_4_Number_345', 'ID_4_Number_346', 'ID_4_Number_347', 'ID_4_Number_348', 'ID_4_Number_349', 'ID_4_Number_350']"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "dEm54HkzZjTh",
      "name": "代码运行#7",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3321.0579886518167,
        "y": 916.8000439182654
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(', ');\n  \n  // 获取数组的长度\n  var arrayLength = dataArray.length;\n  \n  // 生成一个随机索引\n  var randomIndex = Math.floor(Math.random() * arrayLength);\n  \n  // 返回随机索引对应的数组元素\n  return { result: dataArray[randomIndex] };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "bW2MWJHCuOFX",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "py8UnbmAmHMS",
      "name": "文本拼接#16",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3944.9747667873526,
        "y": 1068.3000439182654
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$py8UnbmAmHMS.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "dEm54HkzZjTh",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "jjz2VFY2Ty5W",
      "name": "知识库搜索#4",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4807.287655183548,
        "y": 1083.801970549591
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "py8UnbmAmHMS",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "iWZW62OWPdfu",
      "name": "文本拼接#17",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5818.589185035112,
        "y": 1099.3000439182654
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$jjz2VFY2Ty5W.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "ffVduBI69zvR",
      "name": "代码运行#8",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6681.966140649034,
        "y": 988.821466297449
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 正则表达式匹配JSON对象中的q属性值\n  const jsonPartRegex = /\"q\":\"([^\"]*)\"/;\n  const match = data1.match(jsonPartRegex);\n\n  if (match && match[1]) {\n    // 提取q属性的值，即JSON字符串部分\n    const jsonString = match[1];\n\n    // 使用正则表达式匹配中文字符\n    const chineseText = /[\\u4e00-\\u9fa5]+/g.test(jsonString) ? jsonString.match(/[\\u4e00-\\u9fa5]+/g).join('') : '';\n\n    // 返回包含中文文本的对象\n    return { result: chineseText };\n  } else {\n    // 如果没有找到匹配的JSON字符串部分，返回空结果\n    return { result: '' };\n  }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "iWZW62OWPdfu",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "bgm2ESlJCRJm",
      "name": "文本拼接#18",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7375.187916798561,
        "y": 1099.3000439182654
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "文案标题为：{{$ffVduBI69zvR.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "uqRoV8TBm0Ec",
      "name": "讲故事类型文案结构2#5",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 3287.572580221401,
        "y": 13143.118084596521
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1,
          "value": [
            "lP0u2pvYIjQQ",
            "selectResult"
          ]
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "xgoq7A1D6fYN",
      "name": "AI 对话#5",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 9109.23231880914,
        "y": 11815.787154068963
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "根据额外信息 参照示例结构进行文案仿写，最后一句，句式固定，对于关键词，要进行思考，能够将其转化为父母内心深处的爱，体现在文案中，示例结构如下：\n这是一个母亲对自己孩子说的话，她说，我怕了你一辈子，怀孕的时候怕你畸形，把你生下来，又怕你身体不好。到了初中，怕你叛逆，到了高中又怕你早恋。大学的时候，怕你不回家。你去工作的时候，又怕你不顺心，好不容易等到你结婚了，又怕你不幸福，怕我老了，你不在我身边，怕我没了，没人照顾你。这段话道出了所有母亲对于孩子的心声"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": "",
          "value": [
            "qezIOvMmzzAq",
            "system_text"
          ]
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "qezIOvMmzzAq",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "nmaUafeODWGQ",
      "name": "文本拼接#19",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 10245.766115437258,
        "y": 12077.287154068963
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$xgoq7A1D6fYN.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "u2pe8ywndyXW",
      "name": "文本拼接#20",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3287.572580221401,
        "y": 11921.691866710633
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "['ID_6_Number_1', 'ID_6_Number_2', 'ID_6_Number_3', 'ID_6_Number_4', 'ID_6_Number_5', 'ID_6_Number_6', 'ID_6_Number_7', 'ID_6_Number_8', 'ID_6_Number_9', 'ID_6_Number_10', 'ID_6_Number_11', 'ID_6_Number_12', 'ID_6_Number_13', 'ID_6_Number_14', 'ID_6_Number_15', 'ID_6_Number_16', 'ID_6_Number_17', 'ID_6_Number_18', 'ID_6_Number_19', 'ID_6_Number_20', 'ID_6_Number_21', 'ID_6_Number_22', 'ID_6_Number_23', 'ID_6_Number_24', 'ID_6_Number_25', 'ID_6_Number_26', 'ID_6_Number_27', 'ID_6_Number_28', 'ID_6_Number_29', 'ID_6_Number_30', 'ID_6_Number_31', 'ID_6_Number_32', 'ID_6_Number_33', 'ID_6_Number_34', 'ID_6_Number_35', 'ID_6_Number_36', 'ID_6_Number_37', 'ID_6_Number_38', 'ID_6_Number_39', 'ID_6_Number_40', 'ID_6_Number_41', 'ID_6_Number_42', 'ID_6_Number_43', 'ID_6_Number_44', 'ID_6_Number_45', 'ID_6_Number_46', 'ID_6_Number_47', 'ID_6_Number_48', 'ID_6_Number_49', 'ID_6_Number_50', 'ID_6_Number_51', 'ID_6_Number_52', 'ID_6_Number_53', 'ID_6_Number_54', 'ID_6_Number_55', 'ID_6_Number_56', 'ID_6_Number_57', 'ID_6_Number_58', 'ID_6_Number_59', 'ID_6_Number_60', 'ID_6_Number_61', 'ID_6_Number_62', 'ID_6_Number_63', 'ID_6_Number_64', 'ID_6_Number_65', 'ID_6_Number_66', 'ID_6_Number_67', 'ID_6_Number_68', 'ID_6_Number_69', 'ID_6_Number_70', 'ID_6_Number_71', 'ID_6_Number_72', 'ID_6_Number_73', 'ID_6_Number_74', 'ID_6_Number_75', 'ID_6_Number_76', 'ID_6_Number_77', 'ID_6_Number_78', 'ID_6_Number_79', 'ID_6_Number_80', 'ID_6_Number_81', 'ID_6_Number_82', 'ID_6_Number_83', 'ID_6_Number_84', 'ID_6_Number_85', 'ID_6_Number_86', 'ID_6_Number_87', 'ID_6_Number_88', 'ID_6_Number_89', 'ID_6_Number_90', 'ID_6_Number_91', 'ID_6_Number_92', 'ID_6_Number_93', 'ID_6_Number_94', 'ID_6_Number_95', 'ID_6_Number_96', 'ID_6_Number_97', 'ID_6_Number_98', 'ID_6_Number_99', 'ID_6_Number_100', 'ID_6_Number_101', 'ID_6_Number_102', 'ID_6_Number_103', 'ID_6_Number_104', 'ID_6_Number_105', 'ID_6_Number_106', 'ID_6_Number_107', 'ID_6_Number_108', 'ID_6_Number_109', 'ID_6_Number_110', 'ID_6_Number_111', 'ID_6_Number_112', 'ID_6_Number_113', 'ID_6_Number_114', 'ID_6_Number_115', 'ID_6_Number_116', 'ID_6_Number_117', 'ID_6_Number_118', 'ID_6_Number_119', 'ID_6_Number_120', 'ID_6_Number_121', 'ID_6_Number_122', 'ID_6_Number_123', 'ID_6_Number_124', 'ID_6_Number_125', 'ID_6_Number_126', 'ID_6_Number_127', 'ID_6_Number_128', 'ID_6_Number_129', 'ID_6_Number_130', 'ID_6_Number_131', 'ID_6_Number_132', 'ID_6_Number_133', 'ID_6_Number_134', 'ID_6_Number_135', 'ID_6_Number_136', 'ID_6_Number_137', 'ID_6_Number_138', 'ID_6_Number_139', 'ID_6_Number_140', 'ID_6_Number_141', 'ID_6_Number_142', 'ID_6_Number_143', 'ID_6_Number_144', 'ID_6_Number_145', 'ID_6_Number_146', 'ID_6_Number_147', 'ID_6_Number_148', 'ID_6_Number_149', 'ID_6_Number_150', 'ID_6_Number_151', 'ID_6_Number_152']"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "raE3w6qUQ92B",
      "name": "代码运行#9",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 4186.699887543542,
        "y": 11838.691866710633
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(', ');\n  \n  // 获取数组的长度\n  var arrayLength = dataArray.length;\n  \n  // 生成一个随机索引\n  var randomIndex = Math.floor(Math.random() * arrayLength);\n  \n  // 返回随机索引对应的数组元素\n  return { result: dataArray[randomIndex] };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "u2pe8ywndyXW",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "ntAiEXq99VV6",
      "name": "文本拼接#21",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 4863.1341378902935,
        "y": 11990.691866710633
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$ntAiEXq99VV6.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "raE3w6qUQ92B",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "qLNLLa879tVA",
      "name": "知识库搜索#5",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 5689.421389774325,
        "y": 11971.191866710633
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "ntAiEXq99VV6",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "st12gnzeubXc",
      "name": "文本拼接#22",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 6674.6230074527075,
        "y": 12021.691866710633
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$qLNLLa879tVA.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "fO3MAs8EM3sm",
      "name": "代码运行#10",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 7492.095682976814,
        "y": 11847.397372343592
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 正则表达式匹配JSON对象中的q属性值\n  const jsonPartRegex = /\"q\":\"([^\"]*)\"/;\n  const match = data1.match(jsonPartRegex);\n\n  if (match && match[1]) {\n    // 提取q属性的值，即JSON字符串部分\n    const jsonString = match[1];\n\n    // 使用正则表达式匹配中文字符\n    const chineseText = /[\\u4e00-\\u9fa5]+/g.test(jsonString) ? jsonString.match(/[\\u4e00-\\u9fa5]+/g).join('') : '';\n\n    // 返回包含中文文本的对象\n    return { result: chineseText };\n  } else {\n    // 如果没有找到匹配的JSON字符串部分，返回空结果\n    return { result: '' };\n  }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "st12gnzeubXc",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "qezIOvMmzzAq",
      "name": "文本拼接#23",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 8224.324934607019,
        "y": 12077.287154068963
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "额外信息：{{$fO3MAs8EM3sm.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "zFcWO9DmNwtC",
      "name": "文本拼接#24",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 11165.306367515535,
        "y": 12077.287154068963
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "oADlddGXKoiW",
      "name": "判断器#4",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 1950.6339817379949,
        "y": 11651.404908938337
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "1"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "2"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "3"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "wx9DptzqiP54",
                    "selectResult"
                  ],
                  "condition": "equalTo",
                  "value": "4"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "gtPWiAEdv1qz",
      "name": "文本拼接#25",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3287.572580221401,
        "y": 10616.23856666627
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 528, 529, 530, 531, 532, 533, 534, 535, 536, 537, 538, 539, 540, 541, 542, 543, 544, 545, 546, 547, 548, 549, 550, 551, 552, 553, 554, 555, 556, 557, 558, 559, 560, 561, 562, 563, 564, 565, 566, 567, 568, 569, 570, 571, 572, 573, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 586, 587, 588, 589, 590, 591, 592, 593, 594, 595, 596, 597, 598, 599, 600, 601, 602, 603, 604, 605, 606, 607, 608, 609, 610, 611, 612, 613, 614, 615, 616, 617, 618, 619, 620, 621, 622, 623, 624, 625, 626, 627, 628, 629, 630, 631, 632, 633, 634, 635, 636, 637, 638, 639, 640, 641, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 654, 655, 656, 657, 658, 659, 660, 661, 662, 663, 664, 665, 666, 667, 668, 669, 670, 671, 672, 673, 674, 675, 676, 677, 678, 679, 680, 681, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 693, 694, 695, 696, 697, 698, 699, 700, 701, 702, 703, 704, 705, 706, 707, 708, 709, 710, 711, 712, 713, 714, 715, 716, 717, 718, 719, 720, 721, 722, 723, 724, 725, 726, 727, 728, 729, 730, 731, 732, 733, 734, 735, 736, 737, 738, 739, 740, 741, 742, 743, 744, 745, 746, 747, 748, 749, 750, 751, 752, 753, 754, 755, 756, 757, 758, 759, 760, 761, 762, 763, 764, 765, 766, 767, 768, 769, 770, 771, 772, 773, 774, 775, 776, 777, 778, 779, 780, 781, 782, 783, 784, 785, 786, 787, 788, 789, 790, 791, 792, 793, 794, 795, 796, 797, 798, 799, 800, 801, 802, 803, 804, 805, 806, 807, 808, 809, 810, 811, 812, 813, 814, 815, 816, 817, 818, 819, 820, 821, 822, 823, 824, 825, 826, 827, 828, 829, 830, 831, 832, 833, 834, 835, 836, 837, 838, 839, 840, 841, 842, 843, 844, 845, 846, 847, 848, 849, 850, 851, 852, 853, 854, 855, 856, 857, 858, 859, 860, 861, 862, 863, 864, 865, 866, 867, 868, 869, 870, 871, 872, 873, 874, 875, 876, 877, 878, 879, 880, 881, 882, 883, 884, 885, 886, 887, 888, 889, 890, 891, 892, 893, 894, 895, 896, 897, 898, 899, 900, 901, 902, 903, 904, 905, 906, 907, 908, 909, 910, 911, 912, 913, 914, 915, 916, 917, 918, 919, 920, 921, 922, 923, 924, 925, 926, 927, 928, 929, 930, 931, 932, 933, 934, 935, 936, 937, 938, 939, 940, 941, 942, 943, 944, 945, 946, 947, 948, 949, 950, 951, 952, 953, 954, 955, 956, 957, 958, 959, 960, 961, 962, 963, 964, 965, 966, 967, 968, 969, 970, 971, 972, 973, 974, 975, 976, 977, 978, 979, 980, 981, 982, 983, 984, 985, 986, 987, 988, 989, 990, 991, 992, 993, 994, 995, 996, 997, 998, 999, 1000]"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "i8gt7c8xTFkb",
      "name": "代码运行#11",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 4180.102347989678,
        "y": 10479.23856666627
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(', ');\n  \n  // 获取数组的长度\n  var arrayLength = dataArray.length;\n  \n  // 生成一个随机索引\n  var randomIndex = Math.floor(Math.random() * arrayLength);\n  \n  // 返回随机索引对应的数组元素\n  return { result: dataArray[randomIndex] };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "gtPWiAEdv1qz",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "vLtYLjXPCgRG",
      "name": "文本拼接#26",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 4883.1341378902935,
        "y": 10616.23856666627
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$vLtYLjXPCgRG.123$}}参照示例文案结构，文案仿写，要求文案结构一致，语言风格一致，主题父母，示例结构如下：在这个世界上，只有父母给我们吃的饭是免费的，其他每一餐都需要付出代价。\n如果有一天啊你把父母的心伤透了，那在这世界上可能真的找不到一个人无私的对你这么好了。"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "i8gt7c8xTFkb",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "tciCzs5MORtU",
      "name": "AI 对话#6",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 5804.421389774325,
        "y": 10433.23856666627
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o-mini"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "vLtYLjXPCgRG",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "knpqeonPu7gI",
      "name": "盘点型4",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2455.032904158027,
        "y": 1566.0914293327496
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "['ID_7_Number_1', 'ID_7_Number_2', 'ID_7_Number_3', 'ID_7_Number_4', 'ID_7_Number_5', 'ID_7_Number_6', 'ID_7_Number_7', 'ID_7_Number_8', 'ID_7_Number_9', 'ID_7_Number_10', 'ID_7_Number_11', 'ID_7_Number_12', 'ID_7_Number_13', 'ID_7_Number_14', 'ID_7_Number_15', 'ID_7_Number_16', 'ID_7_Number_17', 'ID_7_Number_18', 'ID_7_Number_19', 'ID_7_Number_20', 'ID_7_Number_21', 'ID_7_Number_22', 'ID_7_Number_23', 'ID_7_Number_24', 'ID_7_Number_25', 'ID_7_Number_26', 'ID_7_Number_27', 'ID_7_Number_28', 'ID_7_Number_29', 'ID_7_Number_30', 'ID_7_Number_31', 'ID_7_Number_32', 'ID_7_Number_33', 'ID_7_Number_34', 'ID_7_Number_35', 'ID_7_Number_36', 'ID_7_Number_37', 'ID_7_Number_38', 'ID_7_Number_39', 'ID_7_Number_40', 'ID_7_Number_41', 'ID_7_Number_42', 'ID_7_Number_43', 'ID_7_Number_44', 'ID_7_Number_45', 'ID_7_Number_46', 'ID_7_Number_47', 'ID_7_Number_48', 'ID_7_Number_49', 'ID_7_Number_50', 'ID_7_Number_51', 'ID_7_Number_52', 'ID_7_Number_53', 'ID_7_Number_54', 'ID_7_Number_55', 'ID_7_Number_56', 'ID_7_Number_57', 'ID_7_Number_58', 'ID_7_Number_59', 'ID_7_Number_60', 'ID_7_Number_61', 'ID_7_Number_62', 'ID_7_Number_63', 'ID_7_Number_64', 'ID_7_Number_65', 'ID_7_Number_66', 'ID_7_Number_67', 'ID_7_Number_68', 'ID_7_Number_69', 'ID_7_Number_70', 'ID_7_Number_71', 'ID_7_Number_72', 'ID_7_Number_73', 'ID_7_Number_74', 'ID_7_Number_75', 'ID_7_Number_76', 'ID_7_Number_77', 'ID_7_Number_78', 'ID_7_Number_79', 'ID_7_Number_80', 'ID_7_Number_81', 'ID_7_Number_82', 'ID_7_Number_83', 'ID_7_Number_84', 'ID_7_Number_85', 'ID_7_Number_86', 'ID_7_Number_87', 'ID_7_Number_88', 'ID_7_Number_89', 'ID_7_Number_90', 'ID_7_Number_91', 'ID_7_Number_92', 'ID_7_Number_93', 'ID_7_Number_94', 'ID_7_Number_95', 'ID_7_Number_96', 'ID_7_Number_97', 'ID_7_Number_98', 'ID_7_Number_99', 'ID_7_Number_100']"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "nONq5gxw0iWA",
      "name": "代码运行#12",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3303.6638508281058,
        "y": 1483.5914293327496
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(', ');\n  \n  // 获取数组的长度\n  var arrayLength = dataArray.length;\n  \n  // 生成一个随机索引\n  var randomIndex = Math.floor(Math.random() * arrayLength);\n  \n  // 返回随机索引对应的数组元素\n  return { result: dataArray[randomIndex] };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "knpqeonPu7gI",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "s3GEGmbHJafY",
      "name": "文本拼接#29",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3954.294947192966,
        "y": 1635.0914293327496
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$s3GEGmbHJafY.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "nONq5gxw0iWA",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "vaLhoBHe2YOW",
      "name": "知识库搜索#6",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4817.222213610274,
        "y": 1628.801970549591
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "s3GEGmbHJafY",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "z03QA2RPMb5k",
      "name": "文本拼接#30",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5818.589185035112,
        "y": 1628.801970549591
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$vaLhoBHe2YOW.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "cUuw0j6rXcf2",
      "name": "代码运行#13",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6681.966140649034,
        "y": 1503.4403457858095
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 正则表达式匹配JSON对象中的q属性值\n  const jsonPartRegex = /\"q\":\"([^\"]*)\"/;\n  const match = data1.match(jsonPartRegex);\n\n  if (match && match[1]) {\n    // 提取q属性的值，即JSON字符串部分\n    const jsonString = match[1];\n\n    // 使用正则表达式匹配中文字符\n    const chineseText = /[\\u4e00-\\u9fa5]+/g.test(jsonString) ? jsonString.match(/[\\u4e00-\\u9fa5]+/g).join('') : '';\n\n    // 返回包含中文文本的对象\n    return { result: chineseText };\n  } else {\n    // 如果没有找到匹配的JSON字符串部分，返回空结果\n    return { result: '' };\n  }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "z03QA2RPMb5k",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "ju86jdLjB7uP",
      "name": "文本拼接#31",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7375.187916798561,
        "y": 1642.4114286309132
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "痛点方向：{{$cUuw0j6rXcf2.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "zGEq7MzAKPT9",
      "name": "AI 对话#8",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8205.18554213278,
        "y": 1593.528123829098
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "根据痛点方向， 参照示例结构进行文案仿写，语言风格一致，格式一致，用词要尖锐，示例结构如下，输出时，不要附带提示信息： \n孩子告别写作业拖拉磨蹭其实很简单，根本不用给孩子辅导作业和讲题。                                注：痛点孩子写作也拖拉，标题表示能解决这一痛点\n家长陪学做到这5点表面功夫，孩子写作业你再也不用操心了。                                         注：方法教学\n这是一条干货视频，中间我会给你一个时间管理清单，结尾有陪学口诀贴在你家墙上。                        注：强调，暗示末尾有顺口溜\n建议先点个红心收藏起来，免得需要的时候找不着了。                                                注：话术\n第一步，把桌面清空，只留下作业本和笔，免得孩子写作业分心。                                          注：第一步：\n第二，坐在孩子旁边保持1米距离，太近容易产生压迫感，让孩子觉得你是监工，会故意拖拉磨蹭，跟你对着干。             注：第二步：\n第三，你要看书，不要说话，更别告诉孩子出了错，会打击他自信。                                        注：第三步：\n第四，写作业之前列清单，写完一项划掉一项，孩子有了成就感，才会主动写。                                  注：第四步：\n最后，让他自己检查，不会的，第二天问老师，这样你会特别轻松，还培养了孩子的主动性。                          注：第五步：\n这个口诀贴在墙上：护理环境整利索，1米以外平行做，闷声学习没有错，时间计划表里落，求助标记集中过。祝愿所有家长都收获一个自主写作业的孩子。               做法：给出顺口溜\n"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "ju86jdLjB7uP",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "yWoNUdqa9lbk",
      "name": "文本拼接#32",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9130.808660372422,
        "y": 1846.56767972059
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$zGEq7MzAKPT9.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "on8I9ggCFzYx",
      "name": "盘点型5",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2455.032904158027,
        "y": 2386.499604740544
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "['ID_8_Number_1', 'ID_8_Number_2', 'ID_8_Number_3', 'ID_8_Number_4', 'ID_8_Number_5', 'ID_8_Number_6', 'ID_8_Number_7', 'ID_8_Number_8', 'ID_8_Number_9', 'ID_8_Number_10', 'ID_8_Number_11', 'ID_8_Number_12', 'ID_8_Number_13', 'ID_8_Number_14', 'ID_8_Number_15', 'ID_8_Number_16', 'ID_8_Number_17', 'ID_8_Number_18', 'ID_8_Number_19', 'ID_8_Number_20', 'ID_8_Number_21', 'ID_8_Number_22', 'ID_8_Number_23', 'ID_8_Number_24', 'ID_8_Number_25', 'ID_8_Number_26', 'ID_8_Number_27', 'ID_8_Number_28', 'ID_8_Number_29', 'ID_8_Number_30', 'ID_8_Number_31', 'ID_8_Number_32', 'ID_8_Number_33', 'ID_8_Number_34', 'ID_8_Number_35', 'ID_8_Number_36', 'ID_8_Number_37', 'ID_8_Number_38', 'ID_8_Number_39', 'ID_8_Number_40', 'ID_8_Number_41', 'ID_8_Number_42', 'ID_8_Number_43', 'ID_8_Number_44', 'ID_8_Number_45', 'ID_8_Number_46', 'ID_8_Number_47', 'ID_8_Number_48', 'ID_8_Number_49', 'ID_8_Number_50', 'ID_8_Number_51', 'ID_8_Number_52', 'ID_8_Number_53', 'ID_8_Number_54', 'ID_8_Number_55', 'ID_8_Number_56', 'ID_8_Number_57', 'ID_8_Number_58', 'ID_8_Number_59', 'ID_8_Number_60', 'ID_8_Number_61', 'ID_8_Number_62', 'ID_8_Number_63', 'ID_8_Number_64', 'ID_8_Number_65', 'ID_8_Number_66', 'ID_8_Number_67', 'ID_8_Number_68', 'ID_8_Number_69', 'ID_8_Number_70', 'ID_8_Number_71', 'ID_8_Number_72', 'ID_8_Number_73', 'ID_8_Number_74', 'ID_8_Number_75', 'ID_8_Number_76', 'ID_8_Number_77', 'ID_8_Number_78', 'ID_8_Number_79', 'ID_8_Number_80', 'ID_8_Number_81', 'ID_8_Number_82', 'ID_8_Number_83', 'ID_8_Number_84', 'ID_8_Number_85', 'ID_8_Number_86', 'ID_8_Number_87', 'ID_8_Number_88', 'ID_8_Number_89', 'ID_8_Number_90', 'ID_8_Number_91', 'ID_8_Number_92', 'ID_8_Number_93', 'ID_8_Number_94', 'ID_8_Number_95', 'ID_8_Number_96', 'ID_8_Number_97', 'ID_8_Number_98', 'ID_8_Number_99', 'ID_8_Number_100']"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "kD6JDEatOfCi",
      "name": "代码运行#14",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3304.580378402992,
        "y": 2303.999604740544
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(', ');\n  \n  // 获取数组的长度\n  var arrayLength = dataArray.length;\n  \n  // 生成一个随机索引\n  var randomIndex = Math.floor(Math.random() * arrayLength);\n  \n  // 返回随机索引对应的数组元素\n  return { result: dataArray[randomIndex] };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "on8I9ggCFzYx",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "cIc95P0tDUVD",
      "name": "文本拼接#34",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3987.830095289579,
        "y": 2455.499604740544
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$cIc95P0tDUVD.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "kD6JDEatOfCi",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "pEAZDNAWZWA3",
      "name": "知识库搜索#7",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4838.362574421501,
        "y": 2436.999604740544
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "cIc95P0tDUVD",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "hu3JZ659fGgN",
      "name": "文本拼接#35",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5818.589185035112,
        "y": 2486.499604740544
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$pEAZDNAWZWA3.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "sU5kKKnaOiQF",
      "name": "代码运行#15",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6681.966140649034,
        "y": 2303.999604740544
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 正则表达式匹配JSON对象中的q属性值\n  const jsonPartRegex = /\"q\":\"([^\"]*)\"/;\n  const match = data1.match(jsonPartRegex);\n\n  if (match && match[1]) {\n    // 提取q属性的值，即JSON字符串部分\n    const jsonString = match[1];\n\n    // 使用正则表达式匹配中文字符\n    const chineseText = /[\\u4e00-\\u9fa5]+/g.test(jsonString) ? jsonString.match(/[\\u4e00-\\u9fa5]+/g).join('') : '';\n\n    // 返回包含中文文本的对象\n    return { result: chineseText };\n  } else {\n    // 如果没有找到匹配的JSON字符串部分，返回空结果\n    return { result: '' };\n  }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "hu3JZ659fGgN",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "j9QVQyMip5V4",
      "name": "文本拼接#36",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7360.500820588296,
        "y": 2503.910616006466
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "额外信息：{{$sU5kKKnaOiQF.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "lwX31fCk6VBj",
      "name": "AI 对话#9",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8205.18554213278,
        "y": 2158.999604740544
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "将额外信息作为标题 参照示例结构进行文案仿写，语言风格一致，格式一致，用词要尖锐，示例结构如下，输出时，不要附带提示信息：\n一定要教会孩子学会吵架。                                                                    \n吵架能让孩子避免到隐性霸凌，避免社交伤害。（简要说明好处，用词很吸引人）\n心理学上啊，吵架的能力就是孩子面对冲突解决问题的能力。（心理学论证）\n教孩子谦让没错，但如果不想把孩子培养成软柿子，你得教他在善良中带有一些锋芒。（正面说反面说，锋芒很吸引人）\n我教你孩子避讳的3个吵架技巧，（教方法）\n第一个叫重复对方的话，比如别人说你真蠢，教孩子说你不仅蠢，还没礼貌，轻松回怼。\n第二个要学会反问，让孩子被冤枉。偷了别人的东西，大部分孩子的第一反应都会说我没有，不是我拿的。为了证明自己的清白，还会让同学搜他书包。这时候要教会孩子反问，你有证据吗？谁看到了，过来对质，你知不知道诬告也是犯罪，会被抓起来的，事实上反败为胜。\n第三个如果孩子实在学不会吵架，就做出一副不好惹的样子，抬头挺胸，走路生风，眉头拧起来，拳头攥起来，这阵势就已经告诉对方，我可不是软柿子。"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "j9QVQyMip5V4",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "qmm9fcblZzB6",
      "name": "文本拼接#37",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9254.985394137686,
        "y": 2486.499604740544
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$lwX31fCk6VBj.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "jlMSfHbXG51q",
      "name": "AI 对话#9",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8215.674605449114,
        "y": 3235.720219515776
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "根据场景示例方向， 参照示例结构进行文案仿写，语言风格一致，格式一致，用词要尖锐，可以适当匹配文案实际而修改内容，示例结构如下，输出时，不要附带提示信息： \n孩子有情绪的时候啊，吼、哄，冷处理其实都不合适，那到底该怎么做呢？给大家五个步骤。  注：描述现象，提出问题，给出思路\n我们拿商场里边不给孩子买东西来举例啊。                                       注：举出实际例子\n视频有一点长，因为我会说得详细一点。                                        注：固定句子\n那第一步呢？肯定孩子的需要，预防情绪升级，孩子的情绪一般不会噌的一下就上来，而当你特别着急的马上否定，责备或者冷处理，忽视孩子感受的时候，他的情绪才会容易升级，容易大哭大闹。          注：给出方式“第一步”，分析问题产生的原因，假设不正当的处理方式，造成问题产生\n所以呢，你要先肯定孩子的感受和需要，比如对他说，你很喜欢这个玩具，想马上就带回家，我看一下它好吗？这个小汽车和家里的小汽车有什么不一样呢？哦，你喜欢它的门是可以开的。类似这样的话，让孩子感到你在乎他的需要。          注： 给出结论“要肯定孩子情绪”，举出语言例子：比如，递进；能够照顾到孩子情绪\n在乎不代表满足，想想你对老公的要求，难道只是他帮你干多少活儿，带多久孩子吗？其实要的就是一个态度，一句肯定和关心的话而已。  注：给出结论“在乎不代表满足”，引申到“老公”要的是态度，而不是行动\n孩子也一样，有了这样一个情感的联系做铺垫，接下来孩子也更容易接受拒绝。      注：同理到孩子情绪问题，进一步论证要肯定孩子感受\n而且啊，这样的一问一答都是让孩子在思考的，调动了他的理性大脑。理性大脑是负责控制情绪的，它一旦被激活了，对预防接下来的大哭大闹有好处，就跟你在情绪爆发之前深呼吸和数数是一个道理。  注：并列，从思考理性的角度，论证，可以预防情绪升级\n第二步，温和坚定地遵守界限。                注：简要给出第二步\n如果你认为不能买，那么就不买，重要的是你内心要坚定这个想法，否则孩子也会感受到你的动摇。  注：通过假设，来解释第二步“坚定”的含义，通过孩子的角度，来分析如果不坚定，会怎么样\n在拒绝他之前，可以问他，你还记得我们来之前怎么说的吗？今天我们没有买玩具的计划。        注：通过询问方式，没有“计划”来否决孩子的想法\n第三步，共情，一般情况下，当你做了之前的铺垫，孩子不太容易大哭大闹。当然了，哭也正常，孩子怎么可能笑着接受你的拒绝呢？                                  注：简要通过 共情两个字 来概述第三步，然后，承上启下，分情况用了两步后“闹还是不闹”过渡， 给出不理想的情况假设\n你可以继续共情他，我知道你很难过，真希望可以把这个玩具买回家，或者你肯定希望咱们家摆满小汽车。      注：回到第三步共情的论述，通过“我知道...真希望...或者肯定希望” 这种语言话术\n这里边有一个沟通的技巧，叫真希望，这是用一种共情的方式在表达对孩子渴望的这种理解。                  注：解释沟通技巧\n这个时候啊，只要没有大哭，孩子是可以听得进去你所说的话的。 你说完这些话呢，孩子可能还会说，那你就给我买吧。 你仍然需要坚守你的界限，告诉他不能。 注：情况分析1 情况分析2 过渡到继续论述方法，第四步\n第四步，替代方案，界限不是一味地不允许孩子做什么，还意味着要把孩子拉回来到可以的范围内能做什么。        注：简要给出第四步结论，给出解释，从允许和不允许角度分析\n如果不能买，还可以给孩子一个可替代的方案，比如说不能买，但是我可以陪你在这里玩儿一会儿它，或者拿出笔和纸，对孩子说，嗯，我会记下来。你喜欢这个小汽车，这就是你的愿望清单，等你过生日的时候，我送给你，好吗？        注：假设不能买，给出替代方案，举出例子  语言 + 或者 动作 +语言\n第五步，倾听哭，不管你之前做得多完美，孩子都有可能哭，因为她觉得痛苦。      注：给出方法，过渡上文\n在接受你不给他买的这个事实以前呀，需要经历几个阶段，否定不行，必须买，愤怒，哭闹，发脾气，悲伤，哭，最后一步才是接纳我们人类面对任何痛苦的事情的时候，这个规律都是这样的。   注： 给出论述\n所以呀，把他带到一个不打扰别人的地方，陪他哭一会儿，可以抱他，也可以在旁边陪着他，这个时候你说话他也听不进去，因为理性大脑没有工作，而你的态度传递给他的是，我能理解你，我随时准备好拥抱你。    注：更为具体的解决方法；可以 + 也可以 + 解释原因 + 这样做的结果\n很多时候啊，你认为的共情没有用，界限不好用。根源是你受不了孩子的哭，而孩子的情绪调节力又不好，它需要通过哭来平衡身体里边压力的荷尔蒙，你只需要倾听就好了。      注：结果 + 结果分析：自己的原因 + 孩子的原因 + 你需要做的\n你会发现，憋着不哭的孩子才更容易生病，也很难笑得大声。   注：给出倾听哭，哭这一方法对孩子的好处\n有人说啊，我孩子哭上几个小时，理论是死的，人是活的，抱着安抚一下，转移一下注意力也就好了。              注：举例反对，进一步给出解释\n如果孩子因为一件事儿没完没了的较劲，不排除他还有其他的情绪压力，也许只是拿着买玩具这件事儿，再和你甩其他的情绪包袱，这是好事儿。         注： 情况假设1，进一步论述是好事\n当然啊，也不排除之前一哭就满足或给他的关注少了，限制过多了，平时多给孩子做选择，多一些专门时间陪伴他，也就会有良性的循环了。            注：假设2，对论述的方法打补丁\n如果你的孩子在两岁以下，不需要搞这么复杂，安抚和转移注意力就是最好的方法。                      注： 假设3 限定年龄范围（根据场景示例，适当调整），直接下定义\n也许你听完以后会觉得天呐，太复杂了，都不知道该怎么养了。                                        注：站在观众角度看待问题，说出观众想法\n是的，比起吼、哄，冷处理，我说的这些很麻烦，但是我相信你最终的期望肯定不是解决孩子哭闹这点儿事儿，而是希望孩子能拥有一个健全的人格和健康的心理。养孩子真的很难，特别是得不到家人支持的时候，充满了无力感。       注：肯定观众，回归到“详细”，提升内容格局：从解决哭闹，提升到孩子的健全人格和健康心理；同理心：拉近读者\n如果你觉得心力交瘁，先别忙着管孩子，先爱一下自己，才能有余下的爱给孩子。   注：同理心：拉近观众：爱自己，提升观众好感度"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "mw48lH8hxiDU",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "jKh0lARW2XiO",
      "name": "文本拼接#37",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9311.585714167875,
        "y": 3652.880195868085
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$jlMSfHbXG51q.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "oAFYJmoZWmPf",
      "name": "盘点型6",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2455.032904158027,
        "y": 3298.334430062856
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "['ID_9_Number_1', 'ID_9_Number_2', 'ID_9_Number_3', 'ID_9_Number_4', 'ID_9_Number_5', 'ID_9_Number_6', 'ID_9_Number_7', 'ID_9_Number_8', 'ID_9_Number_9', 'ID_9_Number_10', 'ID_9_Number_11', 'ID_9_Number_12', 'ID_9_Number_13', 'ID_9_Number_14', 'ID_9_Number_15', 'ID_9_Number_16', 'ID_9_Number_17', 'ID_9_Number_18', 'ID_9_Number_19', 'ID_9_Number_20', 'ID_9_Number_21', 'ID_9_Number_22', 'ID_9_Number_23', 'ID_9_Number_24', 'ID_9_Number_25', 'ID_9_Number_26', 'ID_9_Number_27', 'ID_9_Number_28', 'ID_9_Number_29', 'ID_9_Number_30', 'ID_9_Number_31', 'ID_9_Number_32', 'ID_9_Number_33', 'ID_9_Number_34', 'ID_9_Number_35', 'ID_9_Number_36', 'ID_9_Number_37', 'ID_9_Number_38', 'ID_9_Number_39', 'ID_9_Number_40', 'ID_9_Number_41', 'ID_9_Number_42', 'ID_9_Number_43', 'ID_9_Number_44', 'ID_9_Number_45', 'ID_9_Number_46', 'ID_9_Number_47', 'ID_9_Number_48', 'ID_9_Number_49', 'ID_9_Number_50', 'ID_9_Number_51', 'ID_9_Number_52', 'ID_9_Number_53', 'ID_9_Number_54', 'ID_9_Number_55', 'ID_9_Number_56', 'ID_9_Number_57', 'ID_9_Number_58', 'ID_9_Number_59', 'ID_9_Number_60', 'ID_9_Number_61', 'ID_9_Number_62', 'ID_9_Number_63', 'ID_9_Number_64', 'ID_9_Number_65', 'ID_9_Number_66', 'ID_9_Number_67', 'ID_9_Number_68', 'ID_9_Number_69', 'ID_9_Number_70', 'ID_9_Number_71', 'ID_9_Number_72', 'ID_9_Number_73', 'ID_9_Number_74', 'ID_9_Number_75', 'ID_9_Number_76', 'ID_9_Number_77', 'ID_9_Number_78', 'ID_9_Number_79', 'ID_9_Number_80', 'ID_9_Number_81', 'ID_9_Number_82', 'ID_9_Number_83', 'ID_9_Number_84', 'ID_9_Number_85', 'ID_9_Number_86', 'ID_9_Number_87', 'ID_9_Number_88', 'ID_9_Number_89', 'ID_9_Number_90', 'ID_9_Number_91', 'ID_9_Number_92', 'ID_9_Number_93', 'ID_9_Number_94']"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "bN4cJPep4ptJ",
      "name": "代码运行#16",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3303.6638508281058,
        "y": 3215.334430062856
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(', ');\n  \n  // 获取数组的长度\n  var arrayLength = dataArray.length;\n  \n  // 生成一个随机索引\n  var randomIndex = Math.floor(Math.random() * arrayLength);\n  \n  // 返回随机索引对应的数组元素\n  return { result: dataArray[randomIndex] };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "oAFYJmoZWmPf",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "b4wUCrnMcxR6",
      "name": "文本拼接#39",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3944.9747667873526,
        "y": 3367.334430062856
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$b4wUCrnMcxR6.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "bN4cJPep4ptJ",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "xU4GyzYfEzQq",
      "name": "知识库搜索#8",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4817.222213610274,
        "y": 3339.628924429895
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "b4wUCrnMcxR6",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "sAirqHBxcvXk",
      "name": "文本拼接#40",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5648.831825192367,
        "y": 3390.128924429895
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$xU4GyzYfEzQq.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "p7A96QuscK0a",
      "name": "代码运行#17",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6542.678050521654,
        "y": 3207.128924429895
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 正则表达式匹配JSON对象中的q属性值\n  const jsonPartRegex = /\"q\":\"([^\"]*)\"/;\n  const match = data1.match(jsonPartRegex);\n\n  if (match && match[1]) {\n    // 提取q属性的值，即JSON字符串部分\n    const jsonString = match[1];\n\n    // 使用正则表达式匹配中文字符\n    const chineseText = /[\\u4e00-\\u9fa5]+/g.test(jsonString) ? jsonString.match(/[\\u4e00-\\u9fa5]+/g).join('') : '';\n\n    // 返回包含中文文本的对象\n    return { result: chineseText };\n  } else {\n    // 如果没有找到匹配的JSON字符串部分，返回空结果\n    return { result: '' };\n  }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "sAirqHBxcvXk",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "mw48lH8hxiDU",
      "name": "文本拼接#41",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7386.61733748718,
        "y": 3538.1225201902357
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "场景示例方向：{{$p7A96QuscK0a.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "leUvLCzVTRzm",
      "name": "AI 对话#10",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 7812.095682976814,
        "y": 13275.314181817477
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "You are a helpful assistant."
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1,
          "value": "随机生成一句话"
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "wyNj1G0stOsG",
      "name": "文本拼接#42",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 8681.269460611082,
        "y": 13547.314181817477
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$leUvLCzVTRzm.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "b3dwzeYYhOp9",
      "name": "盘点型7",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2480.4313213004307,
        "y": 4085.3516105285357
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "ID_10_Number_1,ID_10_Number_2,ID_10_Number_3,ID_10_Number_4,ID_10_Number_5,ID_10_Number_6,ID_10_Number_7,ID_10_Number_8,ID_10_Number_9,ID_10_Number_10,ID_10_Number_11,ID_10_Number_12,ID_10_Number_13,ID_10_Number_14,ID_10_Number_15,ID_10_Number_16,ID_10_Number_17,ID_10_Number_18,ID_10_Number_19,ID_10_Number_20,ID_10_Number_21,ID_10_Number_22,ID_10_Number_23,ID_10_Number_24,ID_10_Number_25,ID_10_Number_26,ID_10_Number_27,ID_10_Number_28,ID_10_Number_29,ID_10_Number_30,ID_10_Number_31,ID_10_Number_32,ID_10_Number_33,ID_10_Number_34,ID_10_Number_35,ID_10_Number_36,ID_10_Number_37,ID_10_Number_38"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "cPBiyqeLlNEj",
      "name": "代码运行#18",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3303.6638508281058,
        "y": 4085.3516105285357
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "\nfunction main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(',');\n  \n  function getRandomElements(arr, num) {\n    let result = [];\n    let arrayCopy = [...arr];  // 复制原始数组以避免修改\n\n    for (let i = 0; i < num; i++) {\n        const randomIndex = Math.floor(Math.random() * arrayCopy.length);\n        result.push(arrayCopy[randomIndex]);\n        arrayCopy.splice(randomIndex, 1);  // 移除已经选中的元素\n    }\n\n    return result;\n  }\n  const randomElements = getRandomElements(dataArray, 7);\n\n  // 返回随机索引对应的数组元素\n  return { result: randomElements.join(',') };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "b3dwzeYYhOp9",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "igHvpj3ZwXU2",
      "name": "文本拼接#44",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3831.4615711000824,
        "y": 4180.7658239142875
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$igHvpj3ZwXU2.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "cPBiyqeLlNEj",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "siTZhNoFeYbj",
      "name": "知识库搜索#9",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4778.86730494839,
        "y": 4134.851610528536
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 400,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "igHvpj3ZwXU2",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "yf2Kx6tb3fDj",
      "name": "文本拼接#45",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5657.938156488859,
        "y": 4180.7658239142875
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$siTZhNoFeYbj.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "olFjMG5OtT5B",
      "name": "代码运行#19",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6472.117804568726,
        "y": 4093.246730629952
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将 JSON 字符串解析为对象数组\n\tconst jsonArray = JSON.parse(data1);\n\n\t// 定义一个正则表达式来匹配表格中的 Data 列的值\n\tconst dataRegex = /\\|\\s*\\d+\\s*\\|\\s*[\\w\\d_]+\\s*\\|\\s*([^|]+)\\s*\\|/;\n\n\t// 使用 map 提取 Data 列中的数据\n\tconst dataValues = jsonArray.map(item => {\n\t  const match = item.q.match(dataRegex); // 使用正则表达式匹配第三列 Data\n\t  return match ? match[1].trim() : ''; // 如果匹配成功，返回 Data 列中的值\n\t});\n\n\t// 将 Data 列的数据拼接为一个字符串，使用 \\n 进行分割\n\tconst resulttext = dataValues.join('\\n');\n\n\t// 打印结果\n\treturn { result: resulttext }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "yf2Kx6tb3fDj",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "m46b0UtgNQLH",
      "name": "文本拼接#46",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7386.61733748718,
        "y": 4235.851610528536
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "核心教育观念：{{$olFjMG5OtT5B.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "nBN06HbdhNxH",
      "name": "AI 对话#11",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8334.935542132782,
        "y": 3986.1225201902357
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 4000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "将核心教育观念作为例句，调整语气和用词，使其更符合博士妈妈的身份和教育背景，参照示例结构进行文案仿写，例句语言风格偏向直白、亲切，带有父母亲身经验教育孩子的口吻，格式一致，示例结构如下，输出时，不要附带提示信息：\n\n孩子过了12岁呀，这个性格习惯就定型了，改不了了。（固定语句）\n所有带孩子的妈妈们、奶奶们，如果想要孩子将来有出息，你一定要多和孩子说这7句话，这个非常非常重要，甚至可以改变孩子的未来。（固定语句）\n咱们把这7个问题和孩子说清楚了，比你平时看呐、管呐、陪呀，催，吼，打，骂管用100倍。\n这是培养出两位博士的妈妈和我说的，我觉得他说的非常非常好，他的孩子呢，就是因为这7句话获得了学校无数次的奖励，家里挂满了奖状，那他到底是怎么说的呢？（表现出这些教育方法的实际效果）\n这第一句话，孩子，不管我们有没有钱，我们都不能乱花钱，你记住，赚钱很辛苦，存钱更能给咱们安全感。\n第二句，咱们千万不要去攀比，别人买什么我也想买。这是一时的快乐，我们和别人比，要比就比知识，比眼界，知识和眼界可以让我们变得更加的强大。\n第三句，孩子呀，爸爸妈妈不能陪你一辈子，所以你要学会自己去面对苦难，自己去克服困难。爸爸妈妈可以在你需要的时候帮你一时，但是帮不了你一世呀。\n第四句，咱们遇到挫折的时候，可以哭，但不可以认输，只要咱们不放弃，我们就有机会翻身，就有机会再次成功。\n第五句，遇到危险的时候，不管什么规矩不规矩，保命第一要紧。\n第六句，你不要对爸爸妈妈有怨言，爸爸妈妈会给你我们拥有的一切，但是爸爸妈妈的能力也是有上限的，更多的需求是需要你自己去争取的。\n第七句，爸爸妈妈每天催你学习，管着你学习，是希望你将来拥有更多选择的权利，我们不希望你将来因为找不到好工作而恨现在不努力的自己。\n那么屏幕前的家长，如果你刷到这条视频，你一定要点个小红心保存下来，转发给咱们家孩子看。（固定语句）\n如果咱们家的孩子写作业拖拉磨蹭、撒谎、顶嘴、发脾气，玩手机打游戏，你赶紧点击左下角预约直播按钮，你每天锁定我的直播间，我可以帮你培养出一个优秀的孩子。 （固定语句）\n"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "m46b0UtgNQLH",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "aiu0U07m7GKU",
      "name": "文本拼接#47",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9650.335714167875,
        "y": 4619.130195868084
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$nBN06HbdhNxH.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "tPBNevxNjWq3",
      "name": "盘点型7#48",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2455.032904158027,
        "y": 5087.046691173479
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "ID_11_Number_1,ID_11_Number_2,ID_11_Number_3,ID_11_Number_4,ID_11_Number_5,ID_11_Number_6,ID_11_Number_7,ID_11_Number_8,ID_11_Number_9,ID_11_Number_10,ID_11_Number_11,ID_11_Number_12,ID_11_Number_13,ID_11_Number_14,ID_11_Number_15,ID_11_Number_16,ID_11_Number_17,ID_11_Number_18,ID_11_Number_19,ID_11_Number_20,ID_11_Number_21,ID_11_Number_22,ID_11_Number_23,ID_11_Number_24,ID_11_Number_25,ID_11_Number_26,ID_11_Number_27,ID_11_Number_28,ID_11_Number_29,ID_11_Number_30,ID_11_Number_31,ID_11_Number_32,ID_11_Number_33,ID_11_Number_34,ID_11_Number_35,ID_11_Number_36,ID_11_Number_37,ID_11_Number_38,ID_11_Number_39,ID_11_Number_40,ID_11_Number_41,ID_11_Number_42,ID_11_Number_43,ID_11_Number_44,ID_11_Number_45,ID_11_Number_46,ID_11_Number_47,ID_11_Number_48,ID_11_Number_49,ID_11_Number_50,ID_11_Number_51,ID_11_Number_52,ID_11_Number_53,ID_11_Number_54,ID_11_Number_55,ID_11_Number_56,ID_11_Number_57,ID_11_Number_58,ID_11_Number_59,ID_11_Number_60,ID_11_Number_61"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "oGxUvH5Nn2PB",
      "name": "代码运行#20",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3304.580378402992,
        "y": 5064.944933668033
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "\nfunction main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(',');\n  \n  function getRandomElements(arr, num) {\n    let result = [];\n    let arrayCopy = [...arr];  // 复制原始数组以避免修改\n\n    for (let i = 0; i < num; i++) {\n        const randomIndex = Math.floor(Math.random() * arrayCopy.length);\n        result.push(arrayCopy[randomIndex]);\n        arrayCopy.splice(randomIndex, 1);  // 移除已经选中的元素\n    }\n\n    return result;\n  }\n  const randomElements = getRandomElements(dataArray, 6);\n\n  // 返回随机索引对应的数组元素\n  return { result: randomElements.join(',') };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "tPBNevxNjWq3",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "kqEQ9qK3vvgb",
      "name": "文本拼接#49",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3797.5289937168154,
        "y": 5247.944933668033
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$kqEQ9qK3vvgb.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "oGxUvH5Nn2PB",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "neFKhJ7RkWU7",
      "name": "知识库搜索#10",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4754.1111241467415,
        "y": 5243.994845838878
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 450,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "kqEQ9qK3vvgb",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "hkhod5szKOzX",
      "name": "文本拼接#50",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5629.143264799185,
        "y": 5247.944933668033
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$neFKhJ7RkWU7.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "eeD6ArFDQd3N",
      "name": "代码运行#21",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6361.415096420534,
        "y": 5027.731284514267
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将 JSON 字符串解析为对象数组\n\tconst jsonArray = JSON.parse(data1);\n\n\t// 定义一个正则表达式来匹配表格中的 Data 列的值\n\tconst dataRegex = /\\|\\s*\\d+\\s*\\|\\s*[\\w\\d_]+\\s*\\|\\s*([^|]+)\\s*\\|/;\n\n\t// 使用 map 提取 Data 列中的数据\n\tconst dataValues = jsonArray.map(item => {\n\t  const match = item.q.match(dataRegex); // 使用正则表达式匹配第三列 Data\n\t  return match ? match[1].trim() : ''; // 如果匹配成功，返回 Data 列中的值\n\t});\n\n\t// 将 Data 列的数据拼接为一个字符串，使用 \\n 进行分割\n\tconst resulttext = dataValues.join('\\n');\n\n\t// 打印结果\n\treturn { result: resulttext }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "hkhod5szKOzX",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "hHHoNlmDYtkM",
      "name": "文本拼接#51",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7360.500820588296,
        "y": 5243.994845838878
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "教育原则：{{$eeD6ArFDQd3N.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "dyk4jEEONa1f",
      "name": "AI 对话#12",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8334.935542132782,
        "y": 5090.122520190236
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "将教育原则作为例句，参照示例结构进行文案仿写，例句语言风格偏向直白、亲切，用父亲传授道理的语气和风格，换用不同的内容或场景，格式一致，示例结构如下：\n\n必须由爸爸来告诉孩子的6句话，足以改变他的一生。\n第一，在外人面前，不要和妈妈抬杠顶嘴，要不然妈妈丢人，你自己也会被别人看不起。\n第二，当别人向你说话时，记得回应，哪怕是简短的嗯、好的都可以，但千万不要不吱声，尤其是遇到长辈时，一定要主动打招呼，这是最基本的礼仪。\n第三，不要因为看到别人讲脏话，自己也学着讲，这是最基本的教养。\n第四，去别人家玩时，不要随意翻动别人的物品，更不能擅自进入别人的卧室，那是人家隐私的地方。\n第五，有时候听到别人说谎，不要急于当众揭穿，懂得看破不说破，自己心里明白就好。\n第六，在外人面前，更不能贬低自己的家人，贬低家人其实就是在贬低自己。"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "hHHoNlmDYtkM",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "lEC5rL75wYOQ",
      "name": "文本拼接#52",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9650.335714167875,
        "y": 5537.122520190236
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$dyk4jEEONa1f.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "cinKsmI6f41y",
      "name": "盘点型7#53",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2455.032904158027,
        "y": 6151.566313024438
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "ID_12_Number_1,ID_12_Number_2,ID_12_Number_3,ID_12_Number_4,ID_12_Number_5,ID_12_Number_6,ID_12_Number_7,ID_12_Number_8,ID_12_Number_9,ID_12_Number_10,ID_12_Number_11,ID_12_Number_12,ID_12_Number_13,ID_12_Number_14,ID_12_Number_15,ID_12_Number_16,ID_12_Number_17,ID_12_Number_18,ID_12_Number_19,ID_12_Number_20,ID_12_Number_21,ID_12_Number_22,ID_12_Number_23,ID_12_Number_24,ID_12_Number_25,ID_12_Number_26,ID_12_Number_27,ID_12_Number_28,ID_12_Number_29,ID_12_Number_30,ID_12_Number_31,ID_12_Number_32,ID_12_Number_33,ID_12_Number_34,ID_12_Number_35,ID_12_Number_36,ID_12_Number_37,ID_12_Number_38,ID_12_Number_39,ID_12_Number_40,ID_12_Number_41,ID_12_Number_42,ID_12_Number_43,ID_12_Number_44,ID_12_Number_45,ID_12_Number_46,ID_12_Number_47,ID_12_Number_48,ID_12_Number_49,ID_12_Number_50,ID_12_Number_51,ID_12_Number_52,ID_12_Number_53,ID_12_Number_54,ID_12_Number_55,ID_12_Number_56,ID_12_Number_57,ID_12_Number_58,ID_12_Number_59,ID_12_Number_60,ID_12_Number_61,ID_12_Number_62,ID_12_Number_63,ID_12_Number_64,ID_12_Number_65,ID_12_Number_66,ID_12_Number_67,ID_12_Number_68,ID_12_Number_69,ID_12_Number_70,ID_12_Number_71,ID_12_Number_72,ID_12_Number_73,ID_12_Number_74,ID_12_Number_75,ID_12_Number_76,ID_12_Number_77,ID_12_Number_78,ID_12_Number_79,ID_12_Number_80,ID_12_Number_81,ID_12_Number_82,ID_12_Number_83,ID_12_Number_84,ID_12_Number_85"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "cJAW5NxM3xyP",
      "name": "代码运行#22",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3303.6638508281058,
        "y": 6081.525800853888
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "\nfunction main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(',');\n  \n  function getRandomElements(arr, num) {\n    let result = [];\n    let arrayCopy = [...arr];  // 复制原始数组以避免修改\n\n    for (let i = 0; i < num; i++) {\n        const randomIndex = Math.floor(Math.random() * arrayCopy.length);\n        result.push(arrayCopy[randomIndex]);\n        arrayCopy.splice(randomIndex, 1);  // 移除已经选中的元素\n    }\n\n    return result;\n  }\n  const randomElements = getRandomElements(dataArray, 4);\n\n  // 返回随机索引对应的数组元素\n  return { result: randomElements.join(',') };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "cinKsmI6f41y",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "gMdqH9aAq3iQ",
      "name": "文本拼接#54",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3967.5060255210037,
        "y": 6289.566313024438
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$gMdqH9aAq3iQ.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "cJAW5NxM3xyP",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "ubkrLNiwTkyt",
      "name": "知识库搜索#11",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4778.86730494839,
        "y": 6289.566313024438
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 300,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "gMdqH9aAq3iQ",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "p1gj4edGhNBH",
      "name": "文本拼接#55",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5648.831825192367,
        "y": 6320.566313024438
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$ubkrLNiwTkyt.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "j37IlxxvPrgj",
      "name": "代码运行#23",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6624.164638853533,
        "y": 6181.066313024438
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将 JSON 字符串解析为对象数组\n\tconst jsonArray = JSON.parse(data1);\n\n\t// 定义一个正则表达式来匹配表格中的 Data 列的值\n\tconst dataRegex = /\\|\\s*\\d+\\s*\\|\\s*[\\w\\d_]+\\s*\\|\\s*([^|]+)\\s*\\|/;\n\n\t// 使用 map 提取 Data 列中的数据\n\tconst dataValues = jsonArray.map(item => {\n\t  const match = item.q.match(dataRegex); // 使用正则表达式匹配第三列 Data\n\t  return match ? match[1].trim() : ''; // 如果匹配成功，返回 Data 列中的值\n\t});\n\n\t// 将 Data 列的数据拼接为一个字符串，使用 \\n 进行分割\n\tconst resulttext = dataValues.join('\\n');\n\n\t// 打印结果\n\treturn { result: resulttext }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "p1gj4edGhNBH",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "jGfQ2ul7rjcs",
      "name": "文本拼接#56",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7374.783367085123,
        "y": 6417.622174928236
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "额外信息：{{$j37IlxxvPrgj.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "mJBf3zUlE38Q",
      "name": "AI 对话#13",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8334.935542132782,
        "y": 6204.747822397172
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "将额外信息作为例句，参照示例结构进行文案仿写，保留结构和表达方式，语言风格偏向直白、亲切，用父亲传授道理的语气和风格，示例结构如下，输出时，不要附带提示信息： \n\n再忙也要让爸爸经常给孩子说这4句话，如果连这4句话都没有时间说，充其量算作是孩子生物学上的父亲，尤其是最后一句，能够培养孩子良好的习惯。    （提示：固定语句）\n建议您收藏起来，经常说给孩子听。    （提示：固定语句）\n第一句，有什么需要爸爸帮忙的，为什么要经常给孩子说这句话？\n意思就是说爸爸站在你的背后，就能给孩子满满的安全感。    （提示：解释句子含义，句子的作用）\n第二句，这件事我想听听你的意见，你是怎么想？\n经常问孩子这样的话会让孩子主动的思考，让孩子感觉对事物的掌控能力，他会有自主性，能培养孩子自主的、发散的思维，提升孩子的创造力。    （提示：例句可以培养孩子的能力）\n第三句，经常问孩子今天有什么好的事情发生，有什么开心的事。\n如果他跟你说开心的事情，就多和孩子聊一聊，和他一起分享喜悦，    （提示：假设孩子的反应，父母的做法）\n如果他没有说出来，他也会去想今天发生了什么美好的事情。    （提示：假设孩子的反应，说明例句的作用）\n久而久之，孩子会变得更积极，更乐观。    （提示：例举经常说例句对孩子有哪些帮助）\n最后一句最重要，我们一起制定一个规矩，我们爷俩一起遵守。\n这样呢，就是起到了榜样的力量，能够培养孩子良好的习惯。"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "jGfQ2ul7rjcs",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "vxYCWgF3aLY9",
      "name": "文本拼接#57",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9650.335714167875,
        "y": 6494.594220637893
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$mJBf3zUlE38Q.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "ed2k27CK6Q9b",
      "name": "AI 对话#14",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8334.935542132782,
        "y": 7337.361735037212
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 4000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 0,
          "value": "额外信息作为主题，通过正确的沟通方式，让孩子愿意向父母敞开心扉，避免遇到危险，参照示例结构进行文案仿写，保留结构和表达方式，格式一致，示例结构如下，不要附带提示信息：\n\n很多孩子遇到事儿不愿意告诉家长    （提示：保持引入句子的结构）\n这就非常的容易发生危险。    （提示：孩子沉默面临的风险）\n那么以下3种正确的说话方式呢？能让孩子对您敞开心扉，聪明的爸妈一定要记牢了。    （提示：保持句子结构）\n先说一个错误的：    （提示：固定语句）\n以后不管发生什么事，你都要跟爸爸妈妈说，    （提示：强硬的语气）\n听见没有，不要怕我说你，我说你都是为你好。    （提示：指令性的语气）\n正确的说法呢，是这样的。    （提示：固定语句）\n宝贝，每个人都有自己的小秘密，妈妈特别明白，不过遇到3种情况哈，一定要跟爸妈说。    （提示：引入解决 困惑 的正确的说法）\n第一种就是你被别人欺负了，一定得说，    （提示：引入一个具体的情境或问题，描述孩子可能遇到的困境）\n爸爸妈妈永远都是你最好的依靠，我们会想办法帮助你。    （提示：说明家长会如何帮助解决问题）\n第二，如果有其他大人让你觉得特别不舒服，并且还说不能告诉别人，    （提示：提出一个更敏感或复杂的情境）\n那你就要跟爸妈说了，我们会在第一时间呢来支持你，保护你的。   （提示：告诉他面对这种情况可以寻求家长帮助） \n第三，当你有一些事情特别纠结的时候，别着急做决定，    （提示：提出孩子可能面临的纠结或决策问题）\n咱们呀，一块儿坐下来好好商量一下再做决定好吗？    （提示：强调家长愿意一起讨论问题，帮助孩子一起做决定）"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "vRI4uolqXHL6",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ],
      "isFolded": false
    },
    {
      "nodeId": "bbwIIcSTGyJ4",
      "name": "盘点型7#58",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2455.032904158027,
        "y": 6974.58176194474
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "ID_13_Number_1,ID_13_Number_2,ID_13_Number_3,ID_13_Number_4,ID_13_Number_5,ID_13_Number_6,ID_13_Number_7,ID_13_Number_8,ID_13_Number_9,ID_13_Number_10,ID_13_Number_11,ID_13_Number_12,ID_13_Number_13,ID_13_Number_14,ID_13_Number_15,ID_13_Number_16,ID_13_Number_17,ID_13_Number_18,ID_13_Number_19,ID_13_Number_20,ID_13_Number_21,ID_13_Number_22,ID_13_Number_23,ID_13_Number_24,ID_13_Number_25,ID_13_Number_26,ID_13_Number_27,ID_13_Number_28,ID_13_Number_29,ID_13_Number_30,ID_13_Number_31,ID_13_Number_32,ID_13_Number_33,ID_13_Number_34,ID_13_Number_35,ID_13_Number_36,ID_13_Number_37"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "kOsRuGeSqGqV",
      "name": "代码运行#24",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3303.6638508281058,
        "y": 6974.58176194474
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "\nfunction main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(',');\n  \n  function getRandomElements(arr, num) {\n    let result = [];\n    let arrayCopy = [...arr];  // 复制原始数组以避免修改\n\n    for (let i = 0; i < num; i++) {\n        const randomIndex = Math.floor(Math.random() * arrayCopy.length);\n        result.push(arrayCopy[randomIndex]);\n        arrayCopy.splice(randomIndex, 1);  // 移除已经选中的元素\n    }\n\n    return result;\n  }\n  const randomElements = getRandomElements(dataArray, 1);\n\n  // 返回随机索引对应的数组元素\n  return { result: randomElements.join(',') };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "bbwIIcSTGyJ4",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "nyIRrNZDFHSB",
      "name": "文本拼接#59",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3955.544947192966,
        "y": 6974.58176194474
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$nyIRrNZDFHSB.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "kOsRuGeSqGqV",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "dOXPUf9yjxkc",
      "name": "知识库搜索#12",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4764.772339928796,
        "y": 6974.58176194474
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "nyIRrNZDFHSB",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "qBgpJfGny2zo",
      "name": "文本拼接#60",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5648.831825192367,
        "y": 6974.58176194474
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$dOXPUf9yjxkc.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "g37mRktBdcjb",
      "name": "代码运行#25",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6542.678050521654,
        "y": 7089.846600886884
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将 JSON 字符串解析为对象数组\n\tconst jsonArray = JSON.parse(data1);\n\n\t// 定义一个正则表达式来匹配表格中的 Data 列的值\n\tconst dataRegex = /\\|\\s*\\d+\\s*\\|\\s*[\\w\\d_]+\\s*\\|\\s*([^|]+)\\s*\\|/;\n\n\t// 使用 map 提取 Data 列中的数据\n\tconst dataValues = jsonArray.map(item => {\n\t  const match = item.q.match(dataRegex); // 使用正则表达式匹配第三列 Data\n\t  return match ? match[1].trim() : ''; // 如果匹配成功，返回 Data 列中的值\n\t});\n\n\t// 将 Data 列的数据拼接为一个字符串，使用 \\n 进行分割\n\tconst resulttext = dataValues[0];\n\n\t// 打印结果\n\treturn { result: resulttext }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "qBgpJfGny2zo",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "vRI4uolqXHL6",
      "name": "文本拼接#61",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7374.783367085123,
        "y": 7522.58176194474
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "困惑和正确做法：{{$g37mRktBdcjb.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "zJa9x2k0gYZK",
      "name": "文本拼接#62",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9650.335714167875,
        "y": 7661.075318065168
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$ed2k27CK6Q9b.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "q8yu5jFKB7l1",
      "name": "盘点型7#63",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2455.032904158027,
        "y": 7931.076293456187
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "ID_14_Number_1,ID_14_Number_2,ID_14_Number_3,ID_14_Number_4,ID_14_Number_5,ID_14_Number_6,ID_14_Number_7,ID_14_Number_8,ID_14_Number_9,ID_14_Number_10,ID_14_Number_11,ID_14_Number_12,ID_14_Number_13,ID_14_Number_14,ID_14_Number_15,ID_14_Number_16,ID_14_Number_17,ID_14_Number_18,ID_14_Number_19,ID_14_Number_20,ID_14_Number_21,ID_14_Number_22,ID_14_Number_23,ID_14_Number_24,ID_14_Number_25,ID_14_Number_26,ID_14_Number_27,ID_14_Number_28,ID_14_Number_29,ID_14_Number_30,ID_14_Number_31,ID_14_Number_32,ID_14_Number_33,ID_14_Number_34,ID_14_Number_35,ID_14_Number_36,ID_14_Number_37"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "m47Y1w66t2cI",
      "name": "代码运行#26",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3303.6638508281058,
        "y": 7876.628766763788
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "\nfunction main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(',');\n  \n  function getRandomElements(arr, num) {\n    let result = [];\n    let arrayCopy = [...arr];  // 复制原始数组以避免修改\n\n    for (let i = 0; i < num; i++) {\n        const randomIndex = Math.floor(Math.random() * arrayCopy.length);\n        result.push(arrayCopy[randomIndex]);\n        arrayCopy.splice(randomIndex, 1);  // 移除已经选中的元素\n    }\n\n    return result;\n  }\n  const randomElements = getRandomElements(dataArray, 1);\n\n  // 返回随机索引对应的数组元素\n  return { result: randomElements.join(',') };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "q8yu5jFKB7l1",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "kOZ4155H329D",
      "name": "文本拼接#64",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3967.5060255210037,
        "y": 8097.466025511968
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$kOZ4155H329D.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "m47Y1w66t2cI",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "sDysJ6D3Oy6t",
      "name": "知识库搜索#13",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4754.1111241467415,
        "y": 8031.31079309272
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "kOZ4155H329D",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "npUde6SX0EaV",
      "name": "文本拼接#65",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5591.810568261782,
        "y": 8059.628766763788
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$sDysJ6D3Oy6t.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "jZxpAsuX4iCv",
      "name": "代码运行#27",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6542.678050521654,
        "y": 8031.31079309272
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将 JSON 字符串解析为对象数组\n\tconst jsonArray = JSON.parse(data1);\n\n\t// 定义一个正则表达式来匹配表格中的 Data 列的值\n\tconst dataRegex = /\\|\\s*\\d+\\s*\\|\\s*[\\w\\d_]+\\s*\\|\\s*([^|]+)\\s*\\|/;\n\n\t// 使用 map 提取 Data 列中的数据\n\tconst dataValues = jsonArray.map(item => {\n\t  const match = item.q.match(dataRegex); // 使用正则表达式匹配第三列 Data\n\t  return match ? match[1].trim() : ''; // 如果匹配成功，返回 Data 列中的值\n\t});\n\n\t// 将 Data 列的数据拼接为一个字符串，使用 \\n 进行分割\n\tconst resulttext = dataValues[0];\n\n\t// 打印结果\n\treturn { result: resulttext }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "npUde6SX0EaV",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "cVtRgtStCTtR",
      "name": "文本拼接#66",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7360.500820588296,
        "y": 8188.571254811898
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "额外信息：{{$jZxpAsuX4iCv.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "pFtN7qkp1qiS",
      "name": "AI 对话#15",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8334.935542132782,
        "y": 8325.952323134528
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 4000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 0,
          "value": "将根据额外信息，参照示例结构进行文案仿写，符合参考文案口吻，格式一致，示例结构如下，输出时，不要附带提示信息：\n\n让孩子主动学习最快的方法是什么呢？    （提示：提出问题）\n不是去给他买书买资料，也不是去催他呀，哄他，奖励他，因为这些都不持久。    （提示：错误方法例举，效果不好）\n那接下来我给你讲一个真正的培养方法，你只要按照我说的这个步骤去操作，你家孩子很快就会发生变化。    （提示：固定语句）\n这是我做十年的培育的这个经验总结，我建议你先点赞收藏起来，反复观看。    （提示：固定语句）\n首先我们要搞清楚一个问题啊，就是一个孩子他学习有没有自觉性，    （提示：提出问题）\n他到底缺的是什么？是自觉吗？    （提示：质疑常见观点）\n其实不是，他缺的是一种责任感。    （提示：真正缺失的要素）\n什么是责任感？责任感他是一种心理状态，就是他自己该做的事情，自己就会想办法去做好,    （提示：对责任感做解释）\n所以如果孩子学习上不自觉，本质上就是在学习上没有建立这种责任感。    （提示：揭示问题本质）\n那如果你的孩子刚好缺乏这种学习上的责任感，我给你三个步骤，你一定要记好了。    （提示：固定语句）\n第一步叫做从习惯切入，我不知道你发现一个问题没有啊，    (提示：引入话题)\n就是很多孩子啊，他这个口头上答应的非常好，但就是不做，    （提示：描述普遍现象）\n你记住了啊，所有的孩子他都是想学好的，没有人不想成绩好，没有一个孩子不想受到老师的表扬，同学的羡慕，对吧？    （提示：强调普遍愿望）\n但是为什么一到了这个行动上，他就掉链子呢？    （提示：对现象提出疑问）\n说到底啊，就是他这个学习习惯有问题，一个孩子的学习习惯呢，他就直接决定了这个执行，决定了他的行为，    （提示：对疑问进行分析）\n所以父母一定要重视孩子的这个学习习惯的培养。    （提示：给出建议）\n那第二步呢，就是在这个生活上，你必须退出包办，    （提示：引入第二步）\n你看啊，那些学习上呢，没有自觉性的孩子，你认真去观察，绝大部分孩子他的这个生活上都是依赖父母的，    （提示：描述普遍现象）\n所以呢，就给他养成了一种什么样的心态呢？就是我想要什么，总会有人来帮我做，    （提示：父母养成的心态）\n所以呢，我并不很需要努力就可以拿到结果，    （提示：心态导致的问题）\n你记住啊，你千万不要让他养成这样的心理状态，    （提示：告诫父母不要让孩子养成这种心理）\n所以父母在生活上呢，一定要退出包办，让孩子自己来承担他的这个生活责任，    （提示：提出具体建议）\n比如说他的这个书桌呀，他的房间啊，他的这个臭袜子，乱糟糟的，你就让他自己去整理，不要去帮他。    （提示：给出具体措施）\n所以我们就是这样从一件一件小事上去开始切入，慢慢去改变他这种心理状态。    （提示：强调逐步改变）\n那第三步是什么呢？就是培养孩子对学习的这个成就感，    （提示：引入第三个步骤）\n其实你去认真观察啊，很多孩子他并不是讨厌学习，而是讨厌这个学习过程当中付出了很多的时间啊，精力啊，最后成绩呢还是上不去，    （提示：分析孩子对学习的态度）\n他就会感觉，哎呀非常的沮丧，这个叫什么，这叫做努力之后没有得到一个及时的回馈，所以呢就没有成就感。    （提示：描述孩子的挫败感）\n当孩子这个学习没有成就感的时候呢，你让他再去努力，他就非常的不情愿了，    （提示：解释缺乏成就感的影响）\n所以如果要解决这个问题，你一定要想办法去培养他的这个信心，    （提示：提出解决方案）\n但是这个信心，它不是说你随意的去夸他，哇，孩子，你好厉害，你好棒啊。    （提示：例举错误做法）\n你一定要用一种方法，让孩子自己通过自己的努力去持续获得很多的一百分。    （提示：说明信心培养的正确方法）\n你想一下哈，这个孩子在班上本来学习已经没有心情了，这个月考试，考的乱七八糟，但是突然有一天，诶，他通过自己的努力拿回了第一个一百分，然后他学着学着拿了很多一百分，每天拿很多的一百分，你想一下他这个心理状态是不是一下就起来了。    （提示：举例说明）\n所以呢，这个就是一种科学的训练方法，来提升孩子的这个信心和兴趣，那么这个科学的训练方法他具体怎么操作呢？可以找我来聊一聊。    （提示：固定语句，科学训练方法，号召观众私聊）"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 0,
          "value": [
            "cVtRgtStCTtR",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "qyG1fjfhxrd5",
      "name": "文本拼接#67",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9650.335714167875,
        "y": 8766.617876061715
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$pFtN7qkp1qiS.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "xVD8VmVWkliy",
      "name": "盘点型7#68",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 2432.8119107004436,
        "y": 8918.219321678016
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "ID_15_Number_1,ID_15_Number_2,ID_15_Number_3,ID_15_Number_4,ID_15_Number_5,ID_15_Number_6,ID_15_Number_7,ID_15_Number_8,ID_15_Number_9,ID_15_Number_10,ID_15_Number_11,ID_15_Number_12,ID_15_Number_13,ID_15_Number_14,ID_15_Number_15,ID_15_Number_16,ID_15_Number_17,ID_15_Number_18,ID_15_Number_19,ID_15_Number_20,ID_15_Number_21,ID_15_Number_22,ID_15_Number_23,ID_15_Number_24,ID_15_Number_25,ID_15_Number_26,ID_15_Number_27,ID_15_Number_28,ID_15_Number_29,ID_15_Number_30,ID_15_Number_31,ID_15_Number_32,ID_15_Number_33,ID_15_Number_34,ID_15_Number_35,ID_15_Number_36,ID_15_Number_37,ID_15_Number_38,ID_15_Number_39,ID_15_Number_40,ID_15_Number_41,ID_15_Number_42,ID_15_Number_43,ID_15_Number_44,ID_15_Number_45,ID_15_Number_46,ID_15_Number_47,ID_15_Number_48,ID_15_Number_49,ID_15_Number_50,ID_15_Number_51,ID_15_Number_52,ID_15_Number_53,ID_15_Number_54,ID_15_Number_55,ID_15_Number_56,ID_15_Number_57,ID_15_Number_58,ID_15_Number_59,ID_15_Number_60,ID_15_Number_61,ID_15_Number_62,ID_15_Number_63,ID_15_Number_64,ID_15_Number_65,ID_15_Number_66,ID_15_Number_67,ID_15_Number_68,ID_15_Number_69,ID_15_Number_70,ID_15_Number_71,ID_15_Number_72,ID_15_Number_73,ID_15_Number_74,ID_15_Number_75,ID_15_Number_76,ID_15_Number_77,ID_15_Number_78,ID_15_Number_79,ID_15_Number_80,ID_15_Number_81,ID_15_Number_82,ID_15_Number_83,ID_15_Number_84,ID_15_Number_85,ID_15_Number_86,ID_15_Number_87,ID_15_Number_88,ID_15_Number_89,ID_15_Number_90,ID_15_Number_91,ID_15_Number_92,ID_15_Number_93,ID_15_Number_94"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "zOwxYK9tSk1i",
      "name": "代码运行#28",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 3303.6638508281058,
        "y": 8835.219321678016
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "\nfunction main({data1}) {\n  // 将字符串分割成数组\n  var dataArray = data1.split(',');\n  \n  function getRandomElements(arr, num) {\n    let result = [];\n    let arrayCopy = [...arr];  // 复制原始数组以避免修改\n\n    for (let i = 0; i < num; i++) {\n        const randomIndex = Math.floor(Math.random() * arrayCopy.length);\n        result.push(arrayCopy[randomIndex]);\n        arrayCopy.splice(randomIndex, 1);  // 移除已经选中的元素\n    }\n\n    return result;\n  }\n  const randomElements = getRandomElements(dataArray, 1);\n\n  // 返回随机索引对应的数组元素\n  return { result: randomElements.join(',') };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "xVD8VmVWkliy",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "xLIxzVO0dUJB",
      "name": "文本拼接#69",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 3967.5060255210037,
        "y": 8987.219321678016
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$xLIxzVO0dUJB.123$}}"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "123",
          "label": "123",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "required": true,
          "value": [
            "zOwxYK9tSk1i",
            "qLUQfhG0ILRX"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "jlC0k52lIJ63",
      "name": "知识库搜索#14",
      "intro": "调用“语义检索”和“全文检索”能力，从“知识库”中查找可能与问题相关的参考内容",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4764.772339928796,
        "y": 8987.219321678016
      },
      "version": "481",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "选择知识库",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.4,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 100,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "fullTextRecall",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "需要检索的内容",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "value": [
            "xLIxzVO0dUJB",
            "system_text"
          ]
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "JSONEditor",
            "reference"
          ],
          "label": "集合元数据过滤",
          "valueType": "object",
          "isPro": true,
          "description": "workflow:filter_description",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "d2P4NhHwkeQm",
      "name": "文本拼接#70",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 5611.171326377836,
        "y": 9037.719321678016
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$jlC0k52lIJ63.quoteQA$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "gwEV0eTGX0Do",
      "name": "代码运行#29",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6529.393162514104,
        "y": 8956.21410920532
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}) {\n  // 将 JSON 字符串解析为对象数组\n\tconst jsonArray = JSON.parse(data1);\n\n\t// 定义一个正则表达式来匹配表格中的 Data 列的值\n\tconst dataRegex = /\\|\\s*\\d+\\s*\\|\\s*[\\w\\d_]+\\s*\\|\\s*([^|]+)\\s*\\|/;\n\n\t// 使用 map 提取 Data 列中的数据\n\tconst dataValues = jsonArray.map(item => {\n\t  const match = item.q.match(dataRegex); // 使用正则表达式匹配第三列 Data\n\t  return match ? match[1].trim() : ''; // 如果匹配成功，返回 Data 列中的值\n\t});\n\n\t// 将 Data 列的数据拼接为一个字符串，使用 \\n 进行分割\n\tconst resulttext = dataValues[0];\n\n\t// 打印结果\n\treturn { result: resulttext }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": [
            "d2P4NhHwkeQm",
            "system_text"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "lcaw9HnZIIjD",
      "name": "文本拼接#71",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 7387.128363450447,
        "y": 9037.719321678016
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "额外信息：{{$gwEV0eTGX0Do.qLUQfhG0ILRX$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "qwZ5Jd5V2XMX",
      "name": "AI 对话#16",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8299.55405242409,
        "y": 9196.737637869399
      },
      "version": "481",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "gpt-4o"
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 0,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 2000,
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 0,
          "value": "将根据额外信息，参照示例结构进行文案仿写，符合参考文案口吻，语言风格偏向直白、亲切，格式一致，示例结构如下，输出时，不要附带提示信息：\n\n我就喜欢顶嘴的孩子，    （提示：个人偏好声明，表明对顶嘴孩子的正面态度）\n凡是顶嘴的孩子十有八九都是有出息的，    （提示：表达观点，更有可能成功）\n你觉得他在跟你顶嘴，是不是不孝顺，没有礼貌，长大了以后这孩子可怎么办呢？    （提示：父母的常见的担忧，担心孩子未来）\n你想太多了啊，顶嘴的孩子啊，其实他是在表达自己的意见，    （提示：反驳了上述担忧，对观点作辩护）\n你自己说话有的时候感兴趣了，是不是声音也变大了，那你咋不说你自己没有礼貌的对不对？    （提示：大众普遍行为与孩子行为做类比，说明孩子行为的合理性）\n孩子在表达情绪的时候，人家大声点说话，再加上动作，像我也这样有啥不对的？    （提示：进一步解释，说明孩子行为的合理性）\n而且你家小孩儿给你顶嘴，说明你的教育给他的空间足够的大。    （提示：家长教育方式包容的体现）\n我跟你讲，孩子敢于说话，都是在自己父母面前学会的。    （提示：强调了家庭环境对孩子表达能力的影响）\n他第一次学会有主见，往往就是因为我们家长包容了孩子的这种所谓的不礼貌，顶嘴绝对是好事。    （提示：再次强调了顶嘴的积极面，家长的包容对此至关重要）"
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "stringQuoteText",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "文档引用",
          "debugLabel": "文档引用",
          "description": "app:document_quote_tip",
          "valueType": "string",
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "selectedTypeIndex": 1,
          "value": "额外信息不爱分享：不爱分享有时表明孩子有较强的自主意识，有独立性。"
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "dJwLwXX9grXF",
      "name": "文本拼接#72",
      "intro": "可对固定或传入的文本进行加工后输出，非字符串类型数据最终会转成字符串类型。",
      "avatar": "core/workflow/template/textConcat",
      "flowNodeType": "textEditor",
      "position": {
        "x": 9650.335714167875,
        "y": 9454.9298278981
      },
      "version": "486",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:dynamic_input_description_concat",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_textareaInput",
          "renderTypeList": [
            "textarea"
          ],
          "valueType": "string",
          "required": true,
          "label": "拼接文本",
          "placeholder": "workflow:input_variable_list",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "value": "{{$qwZ5Jd5V2XMX.answerText$}}"
        }
      ],
      "outputs": [
        {
          "id": "system_text",
          "key": "system_text",
          "label": "workflow:concatenation_result",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    }
  ],
  "edges": [
    {
      "source": "ihWXiYcPSk54",
      "target": "ljYjuFkr7N52",
      "sourceHandle": "ihWXiYcPSk54-source-ELSE IF 1",
      "targetHandle": "ljYjuFkr7N52-target-left"
    },
    {
      "source": "448745",
      "target": "sn3zRYmfxy4U",
      "sourceHandle": "448745-source-right",
      "targetHandle": "sn3zRYmfxy4U-target-left"
    },
    {
      "source": "sn3zRYmfxy4U",
      "target": "vm6dwxVI41aH",
      "sourceHandle": "sn3zRYmfxy4U-source-IF",
      "targetHandle": "vm6dwxVI41aH-target-left"
    },
    {
      "source": "vm6dwxVI41aH",
      "target": "ihWXiYcPSk54",
      "sourceHandle": "vm6dwxVI41aH-source-option1",
      "targetHandle": "ihWXiYcPSk54-target-left"
    },
    {
      "source": "lN7HHD8FPVLg",
      "target": "rv4jho1RUpTX",
      "sourceHandle": "lN7HHD8FPVLg-source-right",
      "targetHandle": "rv4jho1RUpTX-target-left"
    },
    {
      "source": "ihWXiYcPSk54",
      "target": "lN7HHD8FPVLg",
      "sourceHandle": "ihWXiYcPSk54-source-IF",
      "targetHandle": "lN7HHD8FPVLg-target-left"
    },
    {
      "source": "rv4jho1RUpTX",
      "target": "dTOAckgNQBni",
      "sourceHandle": "rv4jho1RUpTX-source-right",
      "targetHandle": "dTOAckgNQBni-target-left"
    },
    {
      "source": "dTOAckgNQBni",
      "target": "m15VBD75mePj",
      "sourceHandle": "dTOAckgNQBni-source-right",
      "targetHandle": "m15VBD75mePj-target-left"
    },
    {
      "source": "m15VBD75mePj",
      "target": "sBVGQ7U5TtFh",
      "sourceHandle": "m15VBD75mePj-source-right",
      "targetHandle": "sBVGQ7U5TtFh-target-left"
    },
    {
      "source": "sBVGQ7U5TtFh",
      "target": "hNK6Rp2P7kyW",
      "sourceHandle": "sBVGQ7U5TtFh-source-right",
      "targetHandle": "hNK6Rp2P7kyW-target-left"
    },
    {
      "source": "hNK6Rp2P7kyW",
      "target": "rsSy6VpkKDfE",
      "sourceHandle": "hNK6Rp2P7kyW-source-right",
      "targetHandle": "rsSy6VpkKDfE-target-left"
    },
    {
      "source": "fFFrM5hlpUK2",
      "target": "glc3cxRfDFFr",
      "sourceHandle": "fFFrM5hlpUK2-source-right",
      "targetHandle": "glc3cxRfDFFr-target-left"
    },
    {
      "source": "rsSy6VpkKDfE",
      "target": "fFFrM5hlpUK2",
      "sourceHandle": "rsSy6VpkKDfE-source-right",
      "targetHandle": "fFFrM5hlpUK2-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "gB9FU3Pucx05",
      "sourceHandle": "o4rz7Kdpjrim-source-IF",
      "targetHandle": "gB9FU3Pucx05-target-left"
    },
    {
      "source": "gB9FU3Pucx05",
      "target": "vK3tb6rJyofl",
      "sourceHandle": "gB9FU3Pucx05-source-right",
      "targetHandle": "vK3tb6rJyofl-target-left"
    },
    {
      "source": "vK3tb6rJyofl",
      "target": "n2pxPYqMF2uy",
      "sourceHandle": "vK3tb6rJyofl-source-right",
      "targetHandle": "n2pxPYqMF2uy-target-left"
    },
    {
      "source": "n2pxPYqMF2uy",
      "target": "bCTlQqS29Cm6",
      "sourceHandle": "n2pxPYqMF2uy-source-right",
      "targetHandle": "bCTlQqS29Cm6-target-left"
    },
    {
      "source": "bCTlQqS29Cm6",
      "target": "t2gHJbxWbgZx",
      "sourceHandle": "bCTlQqS29Cm6-source-right",
      "targetHandle": "t2gHJbxWbgZx-target-left"
    },
    {
      "source": "t2gHJbxWbgZx",
      "target": "dTfwyINiw5lh",
      "sourceHandle": "t2gHJbxWbgZx-source-right",
      "targetHandle": "dTfwyINiw5lh-target-left"
    },
    {
      "source": "dTfwyINiw5lh",
      "target": "gxSAX6fBKHZO",
      "sourceHandle": "dTfwyINiw5lh-source-right",
      "targetHandle": "gxSAX6fBKHZO-target-left"
    },
    {
      "source": "gxSAX6fBKHZO",
      "target": "mBZY5O40s6VK",
      "sourceHandle": "gxSAX6fBKHZO-source-right",
      "targetHandle": "mBZY5O40s6VK-target-left"
    },
    {
      "source": "mBZY5O40s6VK",
      "target": "xX1YSATLoVqi",
      "sourceHandle": "mBZY5O40s6VK-source-right",
      "targetHandle": "xX1YSATLoVqi-target-left"
    },
    {
      "source": "sn3zRYmfxy4U",
      "target": "wx9DptzqiP54",
      "sourceHandle": "sn3zRYmfxy4U-source-ELSE IF 1",
      "targetHandle": "wx9DptzqiP54-target-left"
    },
    {
      "source": "wx9DptzqiP54",
      "target": "o4rz7Kdpjrim",
      "sourceHandle": "wx9DptzqiP54-source-option1",
      "targetHandle": "o4rz7Kdpjrim-target-left"
    },
    {
      "source": "l3A2rurWm9EK",
      "target": "ttt3vJMczhlm",
      "sourceHandle": "l3A2rurWm9EK-source-right",
      "targetHandle": "ttt3vJMczhlm-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "iOKincPAf3jO",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 1",
      "targetHandle": "iOKincPAf3jO-target-left"
    },
    {
      "source": "iOKincPAf3jO",
      "target": "pxNoIbxQyB6y",
      "sourceHandle": "iOKincPAf3jO-source-right",
      "targetHandle": "pxNoIbxQyB6y-target-left"
    },
    {
      "source": "pxNoIbxQyB6y",
      "target": "tKh0LtDgcx4U",
      "sourceHandle": "pxNoIbxQyB6y-source-right",
      "targetHandle": "tKh0LtDgcx4U-target-left"
    },
    {
      "source": "tKh0LtDgcx4U",
      "target": "z8HC5eiqAl3e",
      "sourceHandle": "tKh0LtDgcx4U-source-right",
      "targetHandle": "z8HC5eiqAl3e-target-left"
    },
    {
      "source": "z8HC5eiqAl3e",
      "target": "mwSzY90WNL9y",
      "sourceHandle": "z8HC5eiqAl3e-source-right",
      "targetHandle": "mwSzY90WNL9y-target-left"
    },
    {
      "source": "mwSzY90WNL9y",
      "target": "gV8OuPvfX6r1",
      "sourceHandle": "mwSzY90WNL9y-source-right",
      "targetHandle": "gV8OuPvfX6r1-target-left"
    },
    {
      "source": "gV8OuPvfX6r1",
      "target": "mNUYWKHoMnx5",
      "sourceHandle": "gV8OuPvfX6r1-source-right",
      "targetHandle": "mNUYWKHoMnx5-target-left"
    },
    {
      "source": "mNUYWKHoMnx5",
      "target": "l3A2rurWm9EK",
      "sourceHandle": "mNUYWKHoMnx5-source-right",
      "targetHandle": "l3A2rurWm9EK-target-left"
    },
    {
      "source": "tDgqyXNxd4rV",
      "target": "kfZhkNT7U0Cc",
      "sourceHandle": "tDgqyXNxd4rV-source-right",
      "targetHandle": "kfZhkNT7U0Cc-target-left"
    },
    {
      "source": "sn3zRYmfxy4U",
      "target": "lP0u2pvYIjQQ",
      "sourceHandle": "sn3zRYmfxy4U-source-ELSE IF 2",
      "targetHandle": "lP0u2pvYIjQQ-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "bW2MWJHCuOFX",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 2",
      "targetHandle": "bW2MWJHCuOFX-target-left"
    },
    {
      "source": "bW2MWJHCuOFX",
      "target": "dEm54HkzZjTh",
      "sourceHandle": "bW2MWJHCuOFX-source-right",
      "targetHandle": "dEm54HkzZjTh-target-left"
    },
    {
      "source": "dEm54HkzZjTh",
      "target": "py8UnbmAmHMS",
      "sourceHandle": "dEm54HkzZjTh-source-right",
      "targetHandle": "py8UnbmAmHMS-target-left"
    },
    {
      "source": "py8UnbmAmHMS",
      "target": "jjz2VFY2Ty5W",
      "sourceHandle": "py8UnbmAmHMS-source-right",
      "targetHandle": "jjz2VFY2Ty5W-target-left"
    },
    {
      "source": "jjz2VFY2Ty5W",
      "target": "iWZW62OWPdfu",
      "sourceHandle": "jjz2VFY2Ty5W-source-right",
      "targetHandle": "iWZW62OWPdfu-target-left"
    },
    {
      "source": "iWZW62OWPdfu",
      "target": "ffVduBI69zvR",
      "sourceHandle": "iWZW62OWPdfu-source-right",
      "targetHandle": "ffVduBI69zvR-target-left"
    },
    {
      "source": "ffVduBI69zvR",
      "target": "bgm2ESlJCRJm",
      "sourceHandle": "ffVduBI69zvR-source-right",
      "targetHandle": "bgm2ESlJCRJm-target-left"
    },
    {
      "source": "bgm2ESlJCRJm",
      "target": "tDgqyXNxd4rV",
      "sourceHandle": "bgm2ESlJCRJm-source-right",
      "targetHandle": "tDgqyXNxd4rV-target-left"
    },
    {
      "source": "xgoq7A1D6fYN",
      "target": "nmaUafeODWGQ",
      "sourceHandle": "xgoq7A1D6fYN-source-right",
      "targetHandle": "nmaUafeODWGQ-target-left"
    },
    {
      "source": "u2pe8ywndyXW",
      "target": "raE3w6qUQ92B",
      "sourceHandle": "u2pe8ywndyXW-source-right",
      "targetHandle": "raE3w6qUQ92B-target-left"
    },
    {
      "source": "raE3w6qUQ92B",
      "target": "ntAiEXq99VV6",
      "sourceHandle": "raE3w6qUQ92B-source-right",
      "targetHandle": "ntAiEXq99VV6-target-left"
    },
    {
      "source": "ntAiEXq99VV6",
      "target": "qLNLLa879tVA",
      "sourceHandle": "ntAiEXq99VV6-source-right",
      "targetHandle": "qLNLLa879tVA-target-left"
    },
    {
      "source": "qLNLLa879tVA",
      "target": "st12gnzeubXc",
      "sourceHandle": "qLNLLa879tVA-source-right",
      "targetHandle": "st12gnzeubXc-target-left"
    },
    {
      "source": "st12gnzeubXc",
      "target": "fO3MAs8EM3sm",
      "sourceHandle": "st12gnzeubXc-source-right",
      "targetHandle": "fO3MAs8EM3sm-target-left"
    },
    {
      "source": "fO3MAs8EM3sm",
      "target": "qezIOvMmzzAq",
      "sourceHandle": "fO3MAs8EM3sm-source-right",
      "targetHandle": "qezIOvMmzzAq-target-left"
    },
    {
      "source": "qezIOvMmzzAq",
      "target": "xgoq7A1D6fYN",
      "sourceHandle": "qezIOvMmzzAq-source-right",
      "targetHandle": "xgoq7A1D6fYN-target-left"
    },
    {
      "source": "lP0u2pvYIjQQ",
      "target": "oADlddGXKoiW",
      "sourceHandle": "lP0u2pvYIjQQ-source-option1",
      "targetHandle": "oADlddGXKoiW-target-left"
    },
    {
      "source": "oADlddGXKoiW",
      "target": "u2pe8ywndyXW",
      "sourceHandle": "oADlddGXKoiW-source-ELSE IF 1",
      "targetHandle": "u2pe8ywndyXW-target-left"
    },
    {
      "source": "oADlddGXKoiW",
      "target": "gtPWiAEdv1qz",
      "sourceHandle": "oADlddGXKoiW-source-IF",
      "targetHandle": "gtPWiAEdv1qz-target-left"
    },
    {
      "source": "gtPWiAEdv1qz",
      "target": "i8gt7c8xTFkb",
      "sourceHandle": "gtPWiAEdv1qz-source-right",
      "targetHandle": "i8gt7c8xTFkb-target-left"
    },
    {
      "source": "i8gt7c8xTFkb",
      "target": "vLtYLjXPCgRG",
      "sourceHandle": "i8gt7c8xTFkb-source-right",
      "targetHandle": "vLtYLjXPCgRG-target-left"
    },
    {
      "source": "oADlddGXKoiW",
      "target": "uqRoV8TBm0Ec",
      "sourceHandle": "oADlddGXKoiW-source-ELSE IF 3",
      "targetHandle": "uqRoV8TBm0Ec-target-left"
    },
    {
      "source": "nmaUafeODWGQ",
      "target": "zFcWO9DmNwtC",
      "sourceHandle": "nmaUafeODWGQ-source-right",
      "targetHandle": "zFcWO9DmNwtC-target-left"
    },
    {
      "source": "vLtYLjXPCgRG",
      "target": "tciCzs5MORtU",
      "sourceHandle": "vLtYLjXPCgRG-source-right",
      "targetHandle": "tciCzs5MORtU-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "tQuFHW8Oot0x",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE",
      "targetHandle": "tQuFHW8Oot0x-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "knpqeonPu7gI",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 3",
      "targetHandle": "knpqeonPu7gI-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "on8I9ggCFzYx",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 4",
      "targetHandle": "on8I9ggCFzYx-target-left"
    },
    {
      "source": "on8I9ggCFzYx",
      "target": "kD6JDEatOfCi",
      "sourceHandle": "on8I9ggCFzYx-source-right",
      "targetHandle": "kD6JDEatOfCi-target-left"
    },
    {
      "source": "kD6JDEatOfCi",
      "target": "cIc95P0tDUVD",
      "sourceHandle": "kD6JDEatOfCi-source-right",
      "targetHandle": "cIc95P0tDUVD-target-left"
    },
    {
      "source": "cIc95P0tDUVD",
      "target": "pEAZDNAWZWA3",
      "sourceHandle": "cIc95P0tDUVD-source-right",
      "targetHandle": "pEAZDNAWZWA3-target-left"
    },
    {
      "source": "pEAZDNAWZWA3",
      "target": "hu3JZ659fGgN",
      "sourceHandle": "pEAZDNAWZWA3-source-right",
      "targetHandle": "hu3JZ659fGgN-target-left"
    },
    {
      "source": "knpqeonPu7gI",
      "target": "nONq5gxw0iWA",
      "sourceHandle": "knpqeonPu7gI-source-right",
      "targetHandle": "nONq5gxw0iWA-target-left"
    },
    {
      "source": "nONq5gxw0iWA",
      "target": "s3GEGmbHJafY",
      "sourceHandle": "nONq5gxw0iWA-source-right",
      "targetHandle": "s3GEGmbHJafY-target-left"
    },
    {
      "source": "s3GEGmbHJafY",
      "target": "vaLhoBHe2YOW",
      "sourceHandle": "s3GEGmbHJafY-source-right",
      "targetHandle": "vaLhoBHe2YOW-target-left"
    },
    {
      "source": "vaLhoBHe2YOW",
      "target": "z03QA2RPMb5k",
      "sourceHandle": "vaLhoBHe2YOW-source-right",
      "targetHandle": "z03QA2RPMb5k-target-left"
    },
    {
      "source": "z03QA2RPMb5k",
      "target": "cUuw0j6rXcf2",
      "sourceHandle": "z03QA2RPMb5k-source-right",
      "targetHandle": "cUuw0j6rXcf2-target-left"
    },
    {
      "source": "cUuw0j6rXcf2",
      "target": "ju86jdLjB7uP",
      "sourceHandle": "cUuw0j6rXcf2-source-right",
      "targetHandle": "ju86jdLjB7uP-target-left"
    },
    {
      "source": "hu3JZ659fGgN",
      "target": "sU5kKKnaOiQF",
      "sourceHandle": "hu3JZ659fGgN-source-right",
      "targetHandle": "sU5kKKnaOiQF-target-left"
    },
    {
      "source": "sU5kKKnaOiQF",
      "target": "j9QVQyMip5V4",
      "sourceHandle": "sU5kKKnaOiQF-source-right",
      "targetHandle": "j9QVQyMip5V4-target-left"
    },
    {
      "source": "j9QVQyMip5V4",
      "target": "lwX31fCk6VBj",
      "sourceHandle": "j9QVQyMip5V4-source-right",
      "targetHandle": "lwX31fCk6VBj-target-left"
    },
    {
      "source": "lwX31fCk6VBj",
      "target": "qmm9fcblZzB6",
      "sourceHandle": "lwX31fCk6VBj-source-right",
      "targetHandle": "qmm9fcblZzB6-target-left"
    },
    {
      "source": "ju86jdLjB7uP",
      "target": "zGEq7MzAKPT9",
      "sourceHandle": "ju86jdLjB7uP-source-right",
      "targetHandle": "zGEq7MzAKPT9-target-left"
    },
    {
      "source": "zGEq7MzAKPT9",
      "target": "yWoNUdqa9lbk",
      "sourceHandle": "zGEq7MzAKPT9-source-right",
      "targetHandle": "yWoNUdqa9lbk-target-left"
    },
    {
      "source": "jlMSfHbXG51q",
      "target": "jKh0lARW2XiO",
      "sourceHandle": "jlMSfHbXG51q-source-right",
      "targetHandle": "jKh0lARW2XiO-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "oAFYJmoZWmPf",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 5",
      "targetHandle": "oAFYJmoZWmPf-target-left"
    },
    {
      "source": "oAFYJmoZWmPf",
      "target": "bN4cJPep4ptJ",
      "sourceHandle": "oAFYJmoZWmPf-source-right",
      "targetHandle": "bN4cJPep4ptJ-target-left"
    },
    {
      "source": "bN4cJPep4ptJ",
      "target": "b4wUCrnMcxR6",
      "sourceHandle": "bN4cJPep4ptJ-source-right",
      "targetHandle": "b4wUCrnMcxR6-target-left"
    },
    {
      "source": "b4wUCrnMcxR6",
      "target": "xU4GyzYfEzQq",
      "sourceHandle": "b4wUCrnMcxR6-source-right",
      "targetHandle": "xU4GyzYfEzQq-target-left"
    },
    {
      "source": "xU4GyzYfEzQq",
      "target": "sAirqHBxcvXk",
      "sourceHandle": "xU4GyzYfEzQq-source-right",
      "targetHandle": "sAirqHBxcvXk-target-left"
    },
    {
      "source": "sAirqHBxcvXk",
      "target": "p7A96QuscK0a",
      "sourceHandle": "sAirqHBxcvXk-source-right",
      "targetHandle": "p7A96QuscK0a-target-left"
    },
    {
      "source": "p7A96QuscK0a",
      "target": "mw48lH8hxiDU",
      "sourceHandle": "p7A96QuscK0a-source-right",
      "targetHandle": "mw48lH8hxiDU-target-left"
    },
    {
      "source": "mw48lH8hxiDU",
      "target": "jlMSfHbXG51q",
      "sourceHandle": "mw48lH8hxiDU-source-right",
      "targetHandle": "jlMSfHbXG51q-target-left"
    },
    {
      "source": "leUvLCzVTRzm",
      "target": "wyNj1G0stOsG",
      "sourceHandle": "leUvLCzVTRzm-source-right",
      "targetHandle": "wyNj1G0stOsG-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "b3dwzeYYhOp9",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 6",
      "targetHandle": "b3dwzeYYhOp9-target-left"
    },
    {
      "source": "b3dwzeYYhOp9",
      "target": "cPBiyqeLlNEj",
      "sourceHandle": "b3dwzeYYhOp9-source-right",
      "targetHandle": "cPBiyqeLlNEj-target-left"
    },
    {
      "source": "cPBiyqeLlNEj",
      "target": "igHvpj3ZwXU2",
      "sourceHandle": "cPBiyqeLlNEj-source-right",
      "targetHandle": "igHvpj3ZwXU2-target-left"
    },
    {
      "source": "igHvpj3ZwXU2",
      "target": "siTZhNoFeYbj",
      "sourceHandle": "igHvpj3ZwXU2-source-right",
      "targetHandle": "siTZhNoFeYbj-target-left"
    },
    {
      "source": "siTZhNoFeYbj",
      "target": "yf2Kx6tb3fDj",
      "sourceHandle": "siTZhNoFeYbj-source-right",
      "targetHandle": "yf2Kx6tb3fDj-target-left"
    },
    {
      "source": "yf2Kx6tb3fDj",
      "target": "olFjMG5OtT5B",
      "sourceHandle": "yf2Kx6tb3fDj-source-right",
      "targetHandle": "olFjMG5OtT5B-target-left"
    },
    {
      "source": "olFjMG5OtT5B",
      "target": "m46b0UtgNQLH",
      "sourceHandle": "olFjMG5OtT5B-source-right",
      "targetHandle": "m46b0UtgNQLH-target-left"
    },
    {
      "source": "m46b0UtgNQLH",
      "target": "nBN06HbdhNxH",
      "sourceHandle": "m46b0UtgNQLH-source-right",
      "targetHandle": "nBN06HbdhNxH-target-left"
    },
    {
      "source": "nBN06HbdhNxH",
      "target": "aiu0U07m7GKU",
      "sourceHandle": "nBN06HbdhNxH-source-right",
      "targetHandle": "aiu0U07m7GKU-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "tPBNevxNjWq3",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 7",
      "targetHandle": "tPBNevxNjWq3-target-left"
    },
    {
      "source": "tPBNevxNjWq3",
      "target": "oGxUvH5Nn2PB",
      "sourceHandle": "tPBNevxNjWq3-source-right",
      "targetHandle": "oGxUvH5Nn2PB-target-left"
    },
    {
      "source": "oGxUvH5Nn2PB",
      "target": "kqEQ9qK3vvgb",
      "sourceHandle": "oGxUvH5Nn2PB-source-right",
      "targetHandle": "kqEQ9qK3vvgb-target-left"
    },
    {
      "source": "kqEQ9qK3vvgb",
      "target": "neFKhJ7RkWU7",
      "sourceHandle": "kqEQ9qK3vvgb-source-right",
      "targetHandle": "neFKhJ7RkWU7-target-left"
    },
    {
      "source": "neFKhJ7RkWU7",
      "target": "hkhod5szKOzX",
      "sourceHandle": "neFKhJ7RkWU7-source-right",
      "targetHandle": "hkhod5szKOzX-target-left"
    },
    {
      "source": "hkhod5szKOzX",
      "target": "eeD6ArFDQd3N",
      "sourceHandle": "hkhod5szKOzX-source-right",
      "targetHandle": "eeD6ArFDQd3N-target-left"
    },
    {
      "source": "eeD6ArFDQd3N",
      "target": "hHHoNlmDYtkM",
      "sourceHandle": "eeD6ArFDQd3N-source-right",
      "targetHandle": "hHHoNlmDYtkM-target-left"
    },
    {
      "source": "hHHoNlmDYtkM",
      "target": "dyk4jEEONa1f",
      "sourceHandle": "hHHoNlmDYtkM-source-right",
      "targetHandle": "dyk4jEEONa1f-target-left"
    },
    {
      "source": "dyk4jEEONa1f",
      "target": "lEC5rL75wYOQ",
      "sourceHandle": "dyk4jEEONa1f-source-right",
      "targetHandle": "lEC5rL75wYOQ-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "cinKsmI6f41y",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 8",
      "targetHandle": "cinKsmI6f41y-target-left"
    },
    {
      "source": "cinKsmI6f41y",
      "target": "cJAW5NxM3xyP",
      "sourceHandle": "cinKsmI6f41y-source-right",
      "targetHandle": "cJAW5NxM3xyP-target-left"
    },
    {
      "source": "cJAW5NxM3xyP",
      "target": "gMdqH9aAq3iQ",
      "sourceHandle": "cJAW5NxM3xyP-source-right",
      "targetHandle": "gMdqH9aAq3iQ-target-left"
    },
    {
      "source": "gMdqH9aAq3iQ",
      "target": "ubkrLNiwTkyt",
      "sourceHandle": "gMdqH9aAq3iQ-source-right",
      "targetHandle": "ubkrLNiwTkyt-target-left"
    },
    {
      "source": "ubkrLNiwTkyt",
      "target": "p1gj4edGhNBH",
      "sourceHandle": "ubkrLNiwTkyt-source-right",
      "targetHandle": "p1gj4edGhNBH-target-left"
    },
    {
      "source": "p1gj4edGhNBH",
      "target": "j37IlxxvPrgj",
      "sourceHandle": "p1gj4edGhNBH-source-right",
      "targetHandle": "j37IlxxvPrgj-target-left"
    },
    {
      "source": "j37IlxxvPrgj",
      "target": "jGfQ2ul7rjcs",
      "sourceHandle": "j37IlxxvPrgj-source-right",
      "targetHandle": "jGfQ2ul7rjcs-target-left"
    },
    {
      "source": "jGfQ2ul7rjcs",
      "target": "mJBf3zUlE38Q",
      "sourceHandle": "jGfQ2ul7rjcs-source-right",
      "targetHandle": "mJBf3zUlE38Q-target-left"
    },
    {
      "source": "mJBf3zUlE38Q",
      "target": "vxYCWgF3aLY9",
      "sourceHandle": "mJBf3zUlE38Q-source-right",
      "targetHandle": "vxYCWgF3aLY9-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "bbwIIcSTGyJ4",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 9",
      "targetHandle": "bbwIIcSTGyJ4-target-left"
    },
    {
      "source": "bbwIIcSTGyJ4",
      "target": "kOsRuGeSqGqV",
      "sourceHandle": "bbwIIcSTGyJ4-source-right",
      "targetHandle": "kOsRuGeSqGqV-target-left"
    },
    {
      "source": "kOsRuGeSqGqV",
      "target": "nyIRrNZDFHSB",
      "sourceHandle": "kOsRuGeSqGqV-source-right",
      "targetHandle": "nyIRrNZDFHSB-target-left"
    },
    {
      "source": "nyIRrNZDFHSB",
      "target": "dOXPUf9yjxkc",
      "sourceHandle": "nyIRrNZDFHSB-source-right",
      "targetHandle": "dOXPUf9yjxkc-target-left"
    },
    {
      "source": "dOXPUf9yjxkc",
      "target": "qBgpJfGny2zo",
      "sourceHandle": "dOXPUf9yjxkc-source-right",
      "targetHandle": "qBgpJfGny2zo-target-left"
    },
    {
      "source": "qBgpJfGny2zo",
      "target": "g37mRktBdcjb",
      "sourceHandle": "qBgpJfGny2zo-source-right",
      "targetHandle": "g37mRktBdcjb-target-left"
    },
    {
      "source": "g37mRktBdcjb",
      "target": "vRI4uolqXHL6",
      "sourceHandle": "g37mRktBdcjb-source-right",
      "targetHandle": "vRI4uolqXHL6-target-left"
    },
    {
      "source": "vRI4uolqXHL6",
      "target": "ed2k27CK6Q9b",
      "sourceHandle": "vRI4uolqXHL6-source-right",
      "targetHandle": "ed2k27CK6Q9b-target-left"
    },
    {
      "source": "ed2k27CK6Q9b",
      "target": "zJa9x2k0gYZK",
      "sourceHandle": "ed2k27CK6Q9b-source-right",
      "targetHandle": "zJa9x2k0gYZK-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "q8yu5jFKB7l1",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 10",
      "targetHandle": "q8yu5jFKB7l1-target-left"
    },
    {
      "source": "q8yu5jFKB7l1",
      "target": "m47Y1w66t2cI",
      "sourceHandle": "q8yu5jFKB7l1-source-right",
      "targetHandle": "m47Y1w66t2cI-target-left"
    },
    {
      "source": "m47Y1w66t2cI",
      "target": "kOZ4155H329D",
      "sourceHandle": "m47Y1w66t2cI-source-right",
      "targetHandle": "kOZ4155H329D-target-left"
    },
    {
      "source": "kOZ4155H329D",
      "target": "sDysJ6D3Oy6t",
      "sourceHandle": "kOZ4155H329D-source-right",
      "targetHandle": "sDysJ6D3Oy6t-target-left"
    },
    {
      "source": "sDysJ6D3Oy6t",
      "target": "npUde6SX0EaV",
      "sourceHandle": "sDysJ6D3Oy6t-source-right",
      "targetHandle": "npUde6SX0EaV-target-left"
    },
    {
      "source": "npUde6SX0EaV",
      "target": "jZxpAsuX4iCv",
      "sourceHandle": "npUde6SX0EaV-source-right",
      "targetHandle": "jZxpAsuX4iCv-target-left"
    },
    {
      "source": "jZxpAsuX4iCv",
      "target": "cVtRgtStCTtR",
      "sourceHandle": "jZxpAsuX4iCv-source-right",
      "targetHandle": "cVtRgtStCTtR-target-left"
    },
    {
      "source": "cVtRgtStCTtR",
      "target": "pFtN7qkp1qiS",
      "sourceHandle": "cVtRgtStCTtR-source-right",
      "targetHandle": "pFtN7qkp1qiS-target-left"
    },
    {
      "source": "pFtN7qkp1qiS",
      "target": "qyG1fjfhxrd5",
      "sourceHandle": "pFtN7qkp1qiS-source-right",
      "targetHandle": "qyG1fjfhxrd5-target-left"
    },
    {
      "source": "o4rz7Kdpjrim",
      "target": "xVD8VmVWkliy",
      "sourceHandle": "o4rz7Kdpjrim-source-ELSE IF 11",
      "targetHandle": "xVD8VmVWkliy-target-left"
    },
    {
      "source": "xVD8VmVWkliy",
      "target": "zOwxYK9tSk1i",
      "sourceHandle": "xVD8VmVWkliy-source-right",
      "targetHandle": "zOwxYK9tSk1i-target-left"
    },
    {
      "source": "zOwxYK9tSk1i",
      "target": "xLIxzVO0dUJB",
      "sourceHandle": "zOwxYK9tSk1i-source-right",
      "targetHandle": "xLIxzVO0dUJB-target-left"
    },
    {
      "source": "xLIxzVO0dUJB",
      "target": "jlC0k52lIJ63",
      "sourceHandle": "xLIxzVO0dUJB-source-right",
      "targetHandle": "jlC0k52lIJ63-target-left"
    },
    {
      "source": "jlC0k52lIJ63",
      "target": "d2P4NhHwkeQm",
      "sourceHandle": "jlC0k52lIJ63-source-right",
      "targetHandle": "d2P4NhHwkeQm-target-left"
    },
    {
      "source": "d2P4NhHwkeQm",
      "target": "gwEV0eTGX0Do",
      "sourceHandle": "d2P4NhHwkeQm-source-right",
      "targetHandle": "gwEV0eTGX0Do-target-left"
    },
    {
      "source": "gwEV0eTGX0Do",
      "target": "lcaw9HnZIIjD",
      "sourceHandle": "gwEV0eTGX0Do-source-right",
      "targetHandle": "lcaw9HnZIIjD-target-left"
    },
    {
      "source": "lcaw9HnZIIjD",
      "target": "qwZ5Jd5V2XMX",
      "sourceHandle": "lcaw9HnZIIjD-source-right",
      "targetHandle": "qwZ5Jd5V2XMX-target-left"
    },
    {
      "source": "qwZ5Jd5V2XMX",
      "target": "dJwLwXX9grXF",
      "sourceHandle": "qwZ5Jd5V2XMX-source-right",
      "targetHandle": "dJwLwXX9grXF-target-left"
    }
  ],
  "chatConfig": {
    "welcomeText": "请选择希望创作的文案类型后，请输入任意内容触发工作流～\n",
    "variables": [
      {
        "id": "xzg3gj",
        "key": "文案类型",
        "label": "struction_type",
        "type": "select",
        "required": true,
        "maxLen": 50,
        "enums": [
          {
            "value": "故事型"
          },
          {
            "value": "盘点型"
          },
          {
            "value": "嘴替型"
          }
        ],
        "valueType": "string",
        "icon": "core/app/variable/select"
      }
    ],
    "scheduledTriggerConfig": {
      "cronString": "",
      "timezone": "Asia/Shanghai",
      "defaultPrompt": ""
    },
    "_id": "6720592d0903b8298d59d673"
  }
}