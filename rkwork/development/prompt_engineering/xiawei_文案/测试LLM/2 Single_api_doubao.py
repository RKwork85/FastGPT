# # 方式一：http 可实现
# import requests
# import json
 
 
# def ask_doubao(api_key, msg_list):

#     url = "https://ark.cn-beijing.volces.com/api/v3/chat/completions"
#     headers = {
#         "Authorization": "Bearer " + api_key,
#         "Content-Type": "application/json"
#     }
#     data = {
#         "model": "ep-20241107113951-4rvzr",  # 模型端点ID，在线推理申请
#         "messages": msg_list,
#     }

#     response = requests.post(url, headers=headers, json=data)
#     return response
 
 
# if __name__ == '__main__':

#     api_key = "6fac9cce-8ed5-4c98-bf49-37e7787b0112"            # API管理
#     msg_list = [
#         {
#             "role": "system",
#             "content": "你是豆包，是由字节跳动开发的 AI 人工智能助手"
#         }, 
#         {
#             "role": "user",
#             "content": "常见的十字花科植物有哪些"
#         }
#     ]
#     resource = ask_doubao(api_key, msg_list)
#     print(resource.json())



# result
# {'choices': [{'finish_reason': 'stop', 'index': 0, 'logprobs': None, 'message': {'content': '以下是一些常见的十字花科植物：\n\n### 一、蔬菜类\n1. **白菜**\n   - 包括大白菜（Brassica rapa pekinensis）和小白菜（Brassica rapa chinensis）等。大白菜是我国北方冬季常见的蔬菜，叶片宽大，层层包裹，呈球状体；小白菜植株相对较小，叶片较嫩，口感鲜美，富含维生素、矿物质和膳食纤维等营养成分。\n2. **甘蓝**\n   - 例如结球甘蓝（Brassica oleracea var. capitata），也就是我们常说的卷心菜、包菜。其叶片厚实，层层紧抱成球形，有绿、紫等颜色。还有花椰菜（Brassica oleracea var. botrytis），白色的花序可食用，富含维生素C、类胡萝卜素等营养物质；西兰花（Brassica oleracea var. italica），绿色的花球，营养丰富，被认为是一种高营养的蔬菜。\n3. **萝卜**\n   - 如白萝卜（Raphanus sativus var. longipinnatus）、红萝卜（Raphanus sativus var. radculus）等。萝卜肉质根为主要食用部分，形状有长圆形、圆形等，可生食、熟食或腌制，具有消食、下气等功效。\n4. **芥菜**\n   - 芥菜（Brassica juncea）种类较多，雪里蕻（Brassica juncea var. multiceps）是芥菜的一种变种，其茎和叶可用于腌制咸菜；大头菜（Brassica juncea var. megarrhiza）肉质根肥大，可腌制或炒食。\n\n### 二、观赏植物类\n1. **紫罗兰**\n   - 紫罗兰（Matthiola incana），花朵色彩丰富，有紫色、白色、粉色等，花瓣呈十字形排列，花朵香气淡雅，常被用于庭院种植或切花观赏。\n2. **二月兰**\n   - 二月兰（Orychophragmus violaceus），也叫诸葛菜。它是一种常见的野花，在春季开花，花朵为淡紫色，大片生长时形成美丽的紫色花海，常生长在路边、林下等地。', 'role': 'assistant'}}], 'created': 1730950961, 'id': '021730950934997fb7dc9cfb61c996573e2f6246c1be98ae72481', 'model': 'doubao-pro-32k-240828', 'object': 'chat.completion', 'usage': {'completion_tokens': 483, 'prompt_tokens': 35, 'total_tokens': 518}}


## 第二种：openai方式调用

import os
import json 
import time
from openai import OpenAI

question_data = ['额外信息：“个子高：孩子在同龄人之间，显得十分突兀，在群体中也受到排挤和嘲笑, 说他傻大个，电线杆， 他很自卑，而且总被嘲笑说买不起篮球鞋，但是他很有孝心，他妈妈，眼睛花，没有一副好眼镜,如果他有钱的话，他想为妈妈买一副眼镜”\n文案仿写，要求，结构一样，内容相关性高，语言特征一致，用词要能吸引人，贴合实际，细节部分到位，根据额外信息适当修改内容，参考文案：\n原文案：\n有一个小孩胖胖的 到了学校呢 同学们笑他 他心情很愤怒 只要有人笑他呢 他就要跟人家干架 所以他经常伤痕累累的回到家 他妈妈就好心疼 去找老师 老师呢 就会跟这帮小朋友说 你们不要说他了 你们知道不要等于什么 等于要对不对 结果更多人笑他了 一笑他就生气 一生气就吵架 一吵架就打架 老师就跟他讲 你就不能不理他们吗 他们笑归他们了 所以你不管他不行吗 结果就开始说 我不行的 我受不了 他们就不能笑我 好了这个时候呢 学校请了一个心理辅导师过来 这个心理辅导师 对这件事情非常有兴趣 他把这个小男孩叫到办公室 等一下你坐在这里 听他们嘲笑你 如果五分钟的时间 你可以不生气 不管他们说什么 你都可以不生气 你可以赢五百块哦 因为五分钟时间之内 你生气了 他们就赢五百块哦 然后他问这个小男孩 如果你赢了五百块 你会拿来做什么 这个小男孩说 哇哦 如果我赢了五百块 我就想买一辆自行车 我好想买一辆自行车 可是他们说我太胖了 坐上去轮胎就会爆 我好想买一辆自行车 这个心理学家说 那可能你待会可以买一辆自行车 如果他们骂你 你生气了 这五百块就给他们 他们就好赚了 既能骂你又能赚钱 然后这秦同学在这边已经怎么样 跃跃欲试了 对不对 我要把你骂到生气 好了 计时五分钟开始 这些人兴起所有恶毒言来攻击他 前面小男孩生不生气 他就晃着两个小脚 骂呀骂呀骂呀 骂 我不会生气 我有五百块 五分钟过去了 这些人骂得好累 生不生气 生气 五百块拿到了 然后这个心理学家跟他说 我们再来玩一个升级一点的游戏 等下他们要骂你二十分钟 二十分钟 如果你不生气 你可以拿一千块 他说 我想知道 如果你得到这一千块 你会干什么 小男孩想了好久 他眼睛突然红了 他说 我想给我奶奶买个拐杖 我奶奶的腿不好 他总是扶着墙走路 心理学家说 你真的是一个好善良的孩子 我相信奶奶收到拐杖 一定是非常开心的 然后你们准备好了没 喝点水准备好了没 这帮已经有点气累的了 二十分钟一千块 干不干 干 继续骂 没到十来分钟 已经累得不行了 这个小男孩在这边骂呀骂呀 十来分钟休战 一千块拿走 紧跟着心理学家又跟他说 我们打个更好玩的游戏 两千块敢不敢赌 这两千块维持时间是两天 这两天的时间 如果他们用刚才的 肥胖的恶毒的语言攻击你 那么你可以决定自己不生气 胆千块 后来这帮同学说不玩了 事情就这样 心理学家跟男孩子说 你是有权利生气的 因为有些事情 对你真的是造成了伤害 可是我想告诉你 你也是有权利不生气的 你可以选择生气对他们打成一堆 你也可以选择淡然的 有一道屏障挡住这些伤害 到底生气还是不生气 是你选择的 不是他们来决定\n', '额外信息：家长在孩子面前偶尔认个错：父母在孩子面前偶尔认个错可以让，孩子可以接受自己不完美，增涨亲子关系，有助于孩子成长\n文案仿写，要求，结构一样，内容相关性高，语言特征一致，用词要能吸引人，贴合实际，细节部分到位，根据额外信息适当修改内容，参考文案：\n原文案：\n家长经常在孩子面前秀恩爱，会给孩子带来什么呢？\n一会让孩子的情商更高，\n二会让孩子更加自信，善良，乐观，大脑发育快，人际交往更加顺利，\n三，孩子未来会对婚姻充满了向往，懂得如何分担家庭的责任。\n最好的秀恩爱的方式就是在日常生活的柴米油盐，鸡毛蒜皮里，\n每次家长秀恩爱的场景都会是孩子心中最美丽的画面。\n', '额外信息：抠指甲\n参照如下文案结构和分析，根据用户输入的主题，生成文案内容，注意文案的逻辑通畅，只输出最终文案\n3句话让孩子不再顶嘴，妈妈们快收藏起来。\n分析：3句话让孩子+家长想纠正的孩子坏习惯+妈妈们快收藏起来\n第一句话，妈妈知道你现在很生气，但是我们不发脾气，你先冷静一下，等一会儿咱们再聊。\n分析：妈妈懂你（诠释孩子行为原因）\n第二句，妈妈希望你生气的时候说我很生气，我很不开心，而不是说你是个坏妈妈，我讨厌你。\n分析：妈妈希望（告诉孩子正确做法）\n第三句，告诉妈妈你现在的想法，我们一起找最好的办法来解决问题好不好？\n分析：妈妈提议（如何一起解决问题）\n', '文案标题为：这五种孩子啊，永远都学不会自律。\n根据文案标题, 参照示例结构进行文案仿写 ， 示例结构如下：\n这8种学生啊，永远都拿不了高分\n第一写字潦草的学生，\n第二，喜欢拖延的学生，\n第三，不爱总结的学生，\n第4，不爱规则的学生，\n第5，不爱阅读的学生，\n第6，眼高手低的学生，\n第7，基础不扎实的学生，\n第8，把心思全都沉迷在电子游戏的学生。\n', 'number\n[number] +参照示例文案结构，文案仿写，要求文案结构一致，语言风格一致，主题父母，示例结构如下：在这个世界上，只有父母给我们吃的饭是免费的，其他每一餐都需要付出代价。\n如果有一天啊你把父母的心伤透了，那在这世界上可能真的找不到一个人无私的对你这么好了。\n', '口吻：母亲，关键词:失望口吻：母亲，关键词:失望\n根据额外信息 参照示例结构进行文案仿写，最后一句，句式固定，对于关键词，要进行思考，能够将其转化为父母内心深处的爱，体现在文案中，示例结构如下：\n这是一个母亲对自己孩子说的话，她说，我怕了你一辈子，怀孕的时候怕你畸形，把你生下来，又怕你身体不好。到了初中，怕你叛逆，到了高中又怕你早恋。大学的时候，怕你不回家。你去工作的时候，又怕你不顺心，好不容易等到你结婚了，又怕你不幸福，怕我老了，你不在我身边，怕我没了，没人照顾你。这段话道出了所有母亲对于孩子的心声\n', '痛点方向：孩子总想吃快餐\n根据痛点方向， 参照示例结构进行文案仿写，语言风格一致，格式一致，用词要尖锐，示例结构如下，输出时，不要附带提示信息：\n孩子告别写作业拖拉磨蹭其实很简单，根本不用给孩子辅导作业和讲题。                                注：痛点孩子写作也拖拉，标题表示能解决这一痛点\n家长陪学做到这5点表面功夫，孩子写作业你再也不用操心了。                                         注：方法教学\n这是一条干货视频，中间我会给你一个时间管理清单，结尾有陪学口诀贴在你家墙上。                        注：强调，暗示末尾有顺口溜\n建议先点个红心收藏起来，免得需要的时候找不着了。                                                注：话术\n第一步，把桌面清空，只留下作业本和笔，免得孩子写作业分心。                                          注：第一步：\n第二，坐在孩子旁边保持1米距离，太近容易产生压迫感，让孩子觉得你是监工，会故意拖拉磨蹭，跟你对着干。             注：第二步：\n第三，你要看书，不要说话，更别告诉孩子出了错，会打击他自信。                                        注：第三步：\n第四，写作业之前列清单，写完一项划掉一项，孩子有了成就感，才会主动写。                                  注：第四步：\n最后，让他自己检查，不会的，第二天问老师，这样你会特别轻松，还培养了孩子的主动性。                          注：第五步：\n这个口诀贴在墙上：护理环境整利索，1米以外平行做，闷声学习没有错，时间计划表里落，求助标记集中过。祝愿所有家长都收获一个自主写作业的孩子。               做法：给出顺口溜\n', '额外信息：一定要教会孩子不能软弱\n将额外信息作为标题 参照示例结构进行文案仿写，语言风格一致，格式一致，用词要尖锐，示例结构如下，输出时，不要附带提示信息：\n一定要教会孩子学会吵架。\n吵架能让孩子避免到隐性霸凌，避免社交伤害。（简要说明好处，用词很吸引人）\n心理学上啊，吵架的能力就是孩子面对冲突解决问题的能力。（心理学论证）\n教孩子谦让没错，但如果不想把孩子培养成软柿子，你得教他在善良中带有一些锋芒。（正面说反面说，锋芒很吸引人）\n我教你孩子避讳的3个吵架技巧，（教方法）\n第一个叫重复对方的话，比如别人说你真蠢，教孩子说你不仅蠢，还没礼貌，轻松回怼。\n第二个要学会反问，让孩子被冤枉。偷了别人的东西，大部分孩子的第一反应都会说我没有，不是我拿的。为了证明自己的清白，还会让同学搜他书包。这时候要教会孩子反问，你有证据吗？谁看到了，过来对质，你知不知道诬告也是犯罪，会被抓起来的，事实上反败为胜。\n第三个如果孩子实在学不会吵架，就做出一副不好惹的样子，抬头挺胸，走路生风，眉头拧起来，拳头攥起来，这阵势就已经告诉对方，我可不是软柿子。\n', '场景示例方向：孩子必须等待\n根据场景示例方向， 参照示例结构进行文案仿写，语言风格一致，格式一致，用词要尖锐，可以适当匹配文案实际而修改内容，示例结构如下，输出时，不要附带提示信息：\n孩子有情绪的时候啊，吼、哄，冷处理其实都不合适，那到底该怎么做呢？给大家五个步骤。  注：描述现象，提出问题，给出思路\n我们拿商场里边不给孩子买东西来举例啊。                                       注：举出实际例子\n视频有一点长，因为我会说得详细一点。                                        注：固定句子\n那第一步呢？肯定孩子的需要，预防情绪升级，孩子的情绪一般不会噌的一下就上来，而当你特别着急的马上否定，责备或者冷处理，忽视孩子感受的时候，他的情绪才会容易升级，容易大哭大闹。          注：给出方式“第一步”，分析问题产生的原因，假设不正当的处理方式，造成问题产生\n所以呢，你要先肯定孩子的感受和需要，比如对他说，你很喜欢这个玩具，想马上就带回家，我看一下它好吗？这个小汽车和家里的小汽车有什么不一样呢？哦，你喜欢它的门是可以开的。类似这样的话，让孩子感到你在乎他的需要。          注： 给出结论“要肯定孩子情绪”，举出语言例子：比如，递进；能够照顾到孩子情绪\n在乎不代表满足，想想你对老公的要求，难道只是他帮你干多少活儿，带多久孩子吗？其实要的就是一个态度，一句肯定和关心的话而已。  注：给出结论“在乎不代表满足”，引申到“老公”要的是态度，而不是行动\n孩子也一样，有了这样一个情感的联系做铺垫，接下来孩子也更容易接受拒绝。      注：同理到孩子情绪问题，进一步论证要肯定孩子感受\n而且啊，这样的一问一答都是让孩子在思考的，调动了他的理性大脑。理性大脑是负责控制情绪的，它一旦被激活了，对预防接下来的大哭大闹有好处，就跟你在情绪爆发之前深呼吸和数数是一个道理。  注：并列，从思考理性的角度，论证，可以预防情绪升级\n第二步，温和坚定地遵守界限。                注：简要给出第二步\n如果你认为不能买，那么就不买，重要的是你内心要坚定这个想法，否则孩子也会感受到你的动摇。  注：通过假设，来解释第二步“坚定”的含义，通过孩子的角度，来分析如果不坚定，会怎么样\n在拒绝他之前，可以问他，你还记得我们来之前怎么说的吗？今天我们没有买玩具的计划。        注：通过询问方式，没有“计划”来否决孩子的想法\n第三步，共情，一般情况下，当你做了之前的铺垫，孩子不太容易大哭大闹。当然了，哭也正常，孩子怎么可能笑着接受你的拒绝呢？                                  注：简要通过 共情两个字 来概述第三步，然后，承上启下，分情况用了两步后“闹还是不闹”过渡， 给出不理想的情况假设\n你可以继续共情他，我知道你很难过，真希望可以把这个玩具买回家，或者你肯定希望咱们家摆满小汽车。      注：回到第三步共情的论述，通过“我知道...真希望...或者肯定希望” 这种语言话术\n这里边有一个沟通的技巧，叫真希望，这是用一种共情的方式在表达对孩子渴望的这种理解。                  注：解释沟通技巧\n这个时候啊，只要没有大哭，孩子是可以听得进去你所说的话的。 你说完这些话呢，孩子可能还会说，那你就给我买吧。 你仍然需要坚守你的界限，告诉他不能。 注：情况分析1 情况分析2 过渡到继续论述方法，第四步\n第四步，替代方案，界限不是一味地不允许孩子做什么，还意味着要把孩子拉回来到可以的范围内能做什么。        注：简要给出第四步结论，给出解释，从允许和不允许角度分析\n如果不能买，还可以给孩子一个可替代的方案，比如说不能买，但是我可以陪你在这里玩儿一会儿它，或者拿出笔和纸，对孩子说，嗯，我会记下来。你喜欢这个小汽车，这就是你的愿望清单，等你过生日的时候，我送给你，好吗？        注：假设不能买，给出替代方案，举出例子  语言 + 或者 动作 +语言\n第五步，倾听哭，不管你之前做得多完美，孩子都有可能哭，因为她觉得痛苦。      注：给出方法，过渡上文\n在接受你不给他买的这个事实以前呀，需要经历几个阶段，否定不行，必须买，愤怒，哭闹，发脾气，悲伤，哭，最后一步才是接纳我们人类面对任何痛苦的事情的时候，这个规律都是这样的。   注： 给出论述\n所以呀，把他带到一个不打扰别人的地方，陪他哭一会儿，可以抱他，也可以在旁边陪着他，这个时候你说话他也听不进去，因为理性大脑没有工作，而你的态度传递给他的是，我能理解你，我随时准备好拥抱你。    注：更为具体的解决方法；可以 + 也可以 + 解释原因 + 这样做的结果\n很多时候啊，你认为的共情没有用，界限不好用。根源是你受不了孩子的哭，而孩子的情绪调节力又不好，它需要通过哭来平衡身体里边压力的荷尔蒙，你只需要倾听就好了。      注：结果 + 结果分析：自己的原因 + 孩子的原因 + 你需要做的\n你会发现，憋着不哭的孩子才更容易生病，也很难笑得大声。   注：给出倾听哭，哭这一方法对孩子的好处\n有人说啊，我孩子哭上几个小时，理论是死的，人是活的，抱着安抚一下，转移一下注意力也就好了。              注：举例反对，进一步给出解释\n如果孩子因为一件事儿没完没了的较劲，不排除他还有其他的情绪压力，也许只是拿着买玩具这件事儿，再和你甩其他的情绪包袱，这是好事儿。         注： 情况假设1，进一步论述是好事\n当然啊，也不排除之前一哭就满足或给他的关注少了，限制过多了，平时多给孩子做选择，多一些专门时间陪伴他，也就会有良性的循环了。            注：假设2，对论述的方法打补丁\n如果你的孩子在两岁以下，不需要搞这么复杂，安抚和转移注意力就是最好的方法。                      注： 假设3 限定年龄范围（根据场景示例，适当调整），直接下定义\n也许你听完以后会觉得天呐，太复杂了，都不知道该怎么养了。                                        注：站在观众角度看待问题，说出观众想法\n是的，比起吼、哄，冷处理，我说的这些很麻烦，但是我相信你最终的期望肯定不是解决孩子哭闹这点儿事儿，而是希望孩子能拥有一个健全的人格和健康的心理。养孩子真的很难，特别是得不到家人支持的时候，充满了无力感。       注：肯定观众，回归到“详细”，提升内容格局：从解决哭闹，提升到孩子的健全人格和健康心理；同理心：拉近读者\n如果你觉得心力交瘁，先别忙着管孩子，先爱一下自己，才能有余下的爱给孩子。   注：同理心：拉近观众：爱自己，提升观众好感度\n']

# api_key = sk-be8fb3e390b84edba24374f7205a25c6

os.environ['DASHSCOPE_API_KEY'] = '6fac9cce-8ed5-4c98-bf49-37e7787b0112'        ## 2 在模型API中生成密钥

client = OpenAI(
    # 若没有配置环境变量，请用百炼API Key将下行替换为：api_key="sk-xxx",
    api_key=os.getenv("DASHSCOPE_API_KEY"), 
    base_url="https://ark.cn-beijing.volces.com/api/v3",            ## 1 地址要对
)

question_message = question_data[3]
def chat_request(client, question):

    completion = client.chat.completions.create(
        model="ep-20241107113951-4rvzr",                                            ## 3 模型接入点要对
        messages=[
            {'role': 'system', 'content': 'You are a helpful assistant.'},
            {'role': 'user', 'content': f'{question}'}],
        )
    
    completion_cp = completion.model_dump_json()
    data = json.loads(completion_cp)
    # 文本信息
    print(data["choices"][0]['message']['content'])
    
start = time.time()
chat_request(client=client, question=question_message)
end = time.time()
print(f"最终执行时间{end - start}")

